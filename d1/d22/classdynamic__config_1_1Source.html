<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
        ym(94541714, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/94541714" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->
      <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=9"/>
      <meta name="generator" content="Doxygen 1.10.0"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <meta property="og:image" content="../../logo_in_circle.png"/>
      <meta property="og:image:alt" content="userver logo"/>
      <link rel="icon" href="../../favicon.svg">
      <title>userver: dynamic_config::Source Class Reference</title>
      <!-- Roboto fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <!-- Roboto fonts -->
      <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
      <script type="text/javascript" src="../../jquery.js"></script>
      <!-- Highlight.js -->
      <link rel="stylesheet" href="../../highlightjs.css">
      <script src="../../highlight.min.js"></script>
      <!-- Highlight.js -->
      <!-- Roboto fonts -->
      <script type="text/javascript" src="../../dynsections.js"></script>
      <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
      <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
      <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
      <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" href="../../customdoxygen.css">
      <!-- Doxygen Awesome -->
      <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
      <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
        DoxygenAwesomeParagraphLink.init()
        DoxygenAwesomeInteractiveToc.topOffset = 180;
      </script>
      <!-- Doxygen Awesome -->
    </head>
    <body>
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0" style="width: 100%;">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
                <td id="projectalign">
                  <div id="projectname">
                    <a class="titlelink" href="../../index.html">userver
                    </a>
                  </div>
                  <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework</a></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d1/d22/classdynamic__config_1_1Source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d0/d0d/classdynamic__config_1_1Source-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">dynamic_config::Source Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="../../de/d08/group__userver__clients.html">Clients</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d2/d2e/source_8hpp_source.html">userver/dynamic_config/source.hpp</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A client for easy dynamic config fetching in components. </p>
<p>After construction, <a class="el" href="../../d1/d22/classdynamic__config_1_1Source.html" title="A client for easy dynamic config fetching in components.">dynamic_config::Source</a> can be copied around and passed to clients or child helper classes.</p>
<p>Usually retrieved from <a class="el" href="../../dd/d1a/classcomponents_1_1DynamicConfig.html" title="Component that stores the dynamic config.">components::DynamicConfig</a> component.</p>
<p>Typical usage: </p><div class="fragment"><div class="line"><span class="keyword">namespace </span>myservice::smth {</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <span class="keyword">const</span> <a class="code hl_class" href="../../d3/dc3/classdynamic__config_1_1Key.html" title="A config key is a unique identifier for a config variable.">dynamic_config::Key</a> kMyConfig{<span class="stringliteral">&quot;SAMPLE_INTEGER_FROM_RUNTIME_CONFIG&quot;</span>, 42};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> Component::DoSomething()<span class="keyword"> const </span>{</div>
<div class="line">    <span class="comment">// Getting a snapshot of dynamic config.</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> runtime_config = config_.GetSnapshot();</div>
<div class="line">    <span class="keywordflow">return</span> runtime_config[kMyConfig];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace myservice::smth</span></div>
</div><!-- fragment --> <dl class="section examples"><dt>Examples</dt><dd><a class="el" href="../../dd/d4b/components_2component_sample_test_8hpp-example.html#_a4">components/component_sample_test.hpp</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2e/source_8hpp_source.html#l00074">74</a> of file <a class="el" href="../../d2/d2e/source_8hpp_source.html">source.hpp</a>.</p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a574ae76ab8d84dd965160aec58733c61" id="r_a574ae76ab8d84dd965160aec58733c61"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a574ae76ab8d84dd965160aec58733c61">SnapshotEventSource</a> = <a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html">concurrent::AsyncEventSource</a>&lt;const <a class="el" href="../../de/d96/classdynamic__config_1_1Snapshot.html">Snapshot</a>&amp;&gt;</td></tr>
<tr class="separator:a574ae76ab8d84dd965160aec58733c61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4282923d70e8ddd6067f921458d731a" id="r_ac4282923d70e8ddd6067f921458d731a"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac4282923d70e8ddd6067f921458d731a">DiffEventSource</a> = <a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html">concurrent::AsyncEventSource</a>&lt;const <a class="el" href="../../d6/d74/structdynamic__config_1_1Diff.html">Diff</a>&amp;&gt;</td></tr>
<tr class="separator:ac4282923d70e8ddd6067f921458d731a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a069119a6a03afb2773fcb1ae68a43203" id="r_a069119a6a03afb2773fcb1ae68a43203"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a069119a6a03afb2773fcb1ae68a43203">Source</a> (impl::StorageData &amp;storage)</td></tr>
<tr class="separator:a069119a6a03afb2773fcb1ae68a43203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7afff1f32760d7ebcbbef6e2f746aa7" id="r_ae7afff1f32760d7ebcbbef6e2f746aa7"><td class="memItemLeft" align="right" valign="top"><a id="ae7afff1f32760d7ebcbbef6e2f746aa7" name="ae7afff1f32760d7ebcbbef6e2f746aa7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Source</b> (const <a class="el" href="../../d1/d22/classdynamic__config_1_1Source.html">Source</a> &amp;)=default</td></tr>
<tr class="separator:ae7afff1f32760d7ebcbbef6e2f746aa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eb7a5d2cad97fd1a35b315fec422625" id="r_a4eb7a5d2cad97fd1a35b315fec422625"><td class="memItemLeft" align="right" valign="top"><a id="a4eb7a5d2cad97fd1a35b315fec422625" name="a4eb7a5d2cad97fd1a35b315fec422625"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Source</b> (<a class="el" href="../../d1/d22/classdynamic__config_1_1Source.html">Source</a> &amp;&amp;)=default</td></tr>
<tr class="separator:a4eb7a5d2cad97fd1a35b315fec422625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af84cf91a2d6f097f6df55a34360c3436" id="r_af84cf91a2d6f097f6df55a34360c3436"><td class="memItemLeft" align="right" valign="top"><a id="af84cf91a2d6f097f6df55a34360c3436" name="af84cf91a2d6f097f6df55a34360c3436"></a>
<a class="el" href="../../d1/d22/classdynamic__config_1_1Source.html">Source</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="../../d1/d22/classdynamic__config_1_1Source.html">Source</a> &amp;)=default</td></tr>
<tr class="separator:af84cf91a2d6f097f6df55a34360c3436"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63efb2a7cf264faf1c9b34d052c7ecc9" id="r_a63efb2a7cf264faf1c9b34d052c7ecc9"><td class="memItemLeft" align="right" valign="top"><a id="a63efb2a7cf264faf1c9b34d052c7ecc9" name="a63efb2a7cf264faf1c9b34d052c7ecc9"></a>
<a class="el" href="../../d1/d22/classdynamic__config_1_1Source.html">Source</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="../../d1/d22/classdynamic__config_1_1Source.html">Source</a> &amp;&amp;)=default</td></tr>
<tr class="separator:a63efb2a7cf264faf1c9b34d052c7ecc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c0f48d7168e0307dc7a84885bf206ca" id="r_a8c0f48d7168e0307dc7a84885bf206ca"><td class="memItemLeft" align="right" valign="top"><a id="a8c0f48d7168e0307dc7a84885bf206ca" name="a8c0f48d7168e0307dc7a84885bf206ca"></a>
<a class="el" href="../../de/d96/classdynamic__config_1_1Snapshot.html">Snapshot</a>&#160;</td><td class="memItemRight" valign="bottom"><b>GetSnapshot</b> () const</td></tr>
<tr class="separator:a8c0f48d7168e0307dc7a84885bf206ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee7114617774be0cbc1d584ad28f05a" id="r_abee7114617774be0cbc1d584ad28f05a"><td class="memTemplParams" colspan="2">template&lt;typename VariableType &gt; </td></tr>
<tr class="memitem:abee7114617774be0cbc1d584ad28f05a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../dd/df5/classdynamic__config_1_1VariableSnapshotPtr.html">VariableSnapshotPtr</a>&lt; VariableType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#abee7114617774be0cbc1d584ad28f05a">GetSnapshot</a> (const <a class="el" href="../../d3/dc3/classdynamic__config_1_1Key.html">Key</a>&lt; VariableType &gt; &amp;key) const</td></tr>
<tr class="separator:abee7114617774be0cbc1d584ad28f05a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15577a86a87f4c2fe3a9360cfedbbd17" id="r_a15577a86a87f4c2fe3a9360cfedbbd17"><td class="memTemplParams" colspan="2">template&lt;typename VariableType &gt; </td></tr>
<tr class="memitem:a15577a86a87f4c2fe3a9360cfedbbd17"><td class="memTemplItemLeft" align="right" valign="top">VariableType&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a15577a86a87f4c2fe3a9360cfedbbd17">GetCopy</a> (const <a class="el" href="../../d3/dc3/classdynamic__config_1_1Key.html">Key</a>&lt; VariableType &gt; &amp;key) const</td></tr>
<tr class="separator:a15577a86a87f4c2fe3a9360cfedbbd17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7ed3eb0541b0252e20b7719a3dcb3bc" id="r_ad7ed3eb0541b0252e20b7719a3dcb3bc"><td class="memTemplParams" colspan="2">template&lt;typename Class &gt; </td></tr>
<tr class="memitem:ad7ed3eb0541b0252e20b7719a3dcb3bc"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html">concurrent::AsyncEventSubscriberScope</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#ad7ed3eb0541b0252e20b7719a3dcb3bc">UpdateAndListen</a> (Class *obj, std::string_view name, void(Class::*func)(const <a class="el" href="../../de/d96/classdynamic__config_1_1Snapshot.html">dynamic_config::Snapshot</a> &amp;config))</td></tr>
<tr class="separator:ad7ed3eb0541b0252e20b7719a3dcb3bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaa0d4b83274bda7abf853ade6228027" id="r_aaaa0d4b83274bda7abf853ade6228027"><td class="memTemplParams" colspan="2">template&lt;typename Class &gt; </td></tr>
<tr class="memitem:aaaa0d4b83274bda7abf853ade6228027"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html">concurrent::AsyncEventSubscriberScope</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#aaaa0d4b83274bda7abf853ade6228027">UpdateAndListen</a> (Class *obj, std::string_view name, void(Class::*func)(const <a class="el" href="../../d6/d74/structdynamic__config_1_1Diff.html">dynamic_config::Diff</a> &amp;diff))</td></tr>
<tr class="memdesc:aaaa0d4b83274bda7abf853ade6228027"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribes to dynamic-config updates with information about the current and previous states.  <br /></td></tr>
<tr class="separator:aaaa0d4b83274bda7abf853ade6228027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2117a570a138b52449b5fdbd3b7a678" id="r_ae2117a570a138b52449b5fdbd3b7a678"><td class="memTemplParams" colspan="2">template&lt;typename Class , typename... Keys&gt; </td></tr>
<tr class="memitem:ae2117a570a138b52449b5fdbd3b7a678"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html">concurrent::AsyncEventSubscriberScope</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#ae2117a570a138b52449b5fdbd3b7a678">UpdateAndListen</a> (Class *obj, std::string_view name, void(Class::*func)(const <a class="el" href="../../de/d96/classdynamic__config_1_1Snapshot.html">dynamic_config::Snapshot</a> &amp;config), const Keys &amp;... keys)</td></tr>
<tr class="memdesc:ae2117a570a138b52449b5fdbd3b7a678"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribes to updates of a subset of all configs.  <br /></td></tr>
<tr class="separator:ae2117a570a138b52449b5fdbd3b7a678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a5070f9f39b1a725224dca6ed21668a" id="r_a7a5070f9f39b1a725224dca6ed21668a"><td class="memItemLeft" align="right" valign="top"><a id="a7a5070f9f39b1a725224dca6ed21668a" name="a7a5070f9f39b1a725224dca6ed21668a"></a>
<a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html">SnapshotEventSource</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>GetEventChannel</b> ()</td></tr>
<tr class="separator:a7a5070f9f39b1a725224dca6ed21668a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ac4282923d70e8ddd6067f921458d731a" name="ac4282923d70e8ddd6067f921458d731a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4282923d70e8ddd6067f921458d731a">&#9670;&#160;</a></span>DiffEventSource</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html">dynamic_config::Source::DiffEventSource</a> = <a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html">concurrent::AsyncEventSource</a>&lt;const <a class="el" href="../../d6/d74/structdynamic__config_1_1Diff.html">Diff</a>&amp;&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d2e/source_8hpp_source.html#l00077">77</a> of file <a class="el" href="../../d2/d2e/source_8hpp_source.html">source.hpp</a>.</p>

</div>
</div>
<a id="a574ae76ab8d84dd965160aec58733c61" name="a574ae76ab8d84dd965160aec58733c61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a574ae76ab8d84dd965160aec58733c61">&#9670;&#160;</a></span>SnapshotEventSource</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html">dynamic_config::Source::SnapshotEventSource</a> = <a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html">concurrent::AsyncEventSource</a>&lt;const <a class="el" href="../../de/d96/classdynamic__config_1_1Snapshot.html">Snapshot</a>&amp;&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d2e/source_8hpp_source.html#l00076">76</a> of file <a class="el" href="../../d2/d2e/source_8hpp_source.html">source.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a069119a6a03afb2773fcb1ae68a43203" name="a069119a6a03afb2773fcb1ae68a43203"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a069119a6a03afb2773fcb1ae68a43203">&#9670;&#160;</a></span>Source()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dynamic_config::Source::Source </td>
          <td>(</td>
          <td class="paramtype">impl::StorageData &amp;</td>          <td class="paramname"><span class="paramname"><em>storage</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For internal use only. Obtain using <a class="el" href="../../dd/d1a/classcomponents_1_1DynamicConfig.html" title="Component that stores the dynamic config.">components::DynamicConfig</a> or <a class="el" href="../../d6/dec/classdynamic__config_1_1StorageMock.html" title="Backing storage for dynamic_config::Source in tests and benchmarks.">dynamic_config::StorageMock</a> instead. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a15577a86a87f4c2fe3a9360cfedbbd17" name="a15577a86a87f4c2fe3a9360cfedbbd17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15577a86a87f4c2fe3a9360cfedbbd17">&#9670;&#160;</a></span>GetCopy()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VariableType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">VariableType dynamic_config::Source::GetCopy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/dc3/classdynamic__config_1_1Key.html">Key</a>&lt; VariableType &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>key</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d2e/source_8hpp_source.html#l00097">97</a> of file <a class="el" href="../../d2/d2e/source_8hpp_source.html">source.hpp</a>.</p>

</div>
</div>
<a id="abee7114617774be0cbc1d584ad28f05a" name="abee7114617774be0cbc1d584ad28f05a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee7114617774be0cbc1d584ad28f05a">&#9670;&#160;</a></span>GetSnapshot()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VariableType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/df5/classdynamic__config_1_1VariableSnapshotPtr.html">VariableSnapshotPtr</a>&lt; VariableType &gt; dynamic_config::Source::GetSnapshot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/dc3/classdynamic__config_1_1Key.html">Key</a>&lt; VariableType &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>key</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d2e/source_8hpp_source.html#l00092">92</a> of file <a class="el" href="../../d2/d2e/source_8hpp_source.html">source.hpp</a>.</p>

</div>
</div>
<a id="aaaa0d4b83274bda7abf853ade6228027" name="aaaa0d4b83274bda7abf853ade6228027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaa0d4b83274bda7abf853ade6228027">&#9670;&#160;</a></span>UpdateAndListen() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Class &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html">concurrent::AsyncEventSubscriberScope</a> dynamic_config::Source::UpdateAndListen </td>
          <td>(</td>
          <td class="paramtype">Class *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(Class::*)(const <a class="el" href="../../d6/d74/structdynamic__config_1_1Diff.html">dynamic_config::Diff</a> &amp;diff)</td>          <td class="paramname"><span class="paramname"><em>func</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Subscribes to dynamic-config updates with information about the current and previous states. </p>
<p>Subscribes to dynamic-config updates using a member function, named <code>OnConfigUpdate</code> by convention. Also constructs <code><a class="el" href="../../d6/d74/structdynamic__config_1_1Diff.html" title="Helper class for subscribing to dynamic-config updates with a custom callback.">dynamic_config::Diff</a></code> object using <code>std::nullopt</code> and current config snapshot, then immediately invokes the function with it (this invocation will be executed synchronously).</p>
<dl class="section note"><dt>Note</dt><dd>Callbacks occur in full accordance with <code><a class="el" href="../../d3/da0/classcomponents_1_1DynamicConfigClientUpdater.html" title="Component that does a periodic update of runtime configs.">components::DynamicConfigClientUpdater</a></code> options.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>In debug mode the last notification for any subscriber will be called with <code>std::nullopt</code> and current config snapshot.</dd></dl>
<p>Example usage: </p><div class="fragment"><div class="line">    <span class="keywordtype">void</span> OnConfigUpdate(<span class="keyword">const</span> <a class="code hl_struct" href="../../d6/d74/structdynamic__config_1_1Diff.html" title="Helper class for subscribing to dynamic-config updates with a custom callback.">dynamic_config::Diff</a>&amp; diff_data) {</div>
<div class="line">        <span class="keywordflow">if</span> (!diff_data.previous) <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; previous = *diff_data.previous;</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; current = diff_data.current;</div>
<div class="line">        <span class="keywordflow">if</span> (previous[kBoolConfig] != current[kBoolConfig]) {</div>
<div class="line">            OnBoolConfigChanged();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (previous[kDummyConfig].foo != current[kDummyConfig].foo) {</div>
<div class="line">            OnFooChanged();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> OnBoolConfigChanged() { bool_config_change_counter_++; }</div>
<div class="line">    <span class="keywordtype">void</span> OnFooChanged() { foo_interesting_event_counter_++; }</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>the subscriber, which is the owner of the listener method, and is also used as the unique identifier of the subscription </td></tr>
    <tr><td class="paramname">name</td><td>the name of the subscriber, for diagnostic purposes </td></tr>
    <tr><td class="paramname">func</td><td>the listener method, named <code>OnConfigUpdate</code> by convention. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a <code><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html" title="Manages the subscription to events from an AsyncEventSource.">concurrent::AsyncEventSubscriberScope</a></code> controlling the subscription, which should be stored as a member in the subscriber; <code>Unsubscribe</code> should be called explicitly</dd></dl>
<dl class="section see"><dt>See also</dt><dd>based on <a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html" title="The read-only side of an event channel. Events are delivered to listeners in a strict FIFO order,...">concurrent::AsyncEventSource</a> <a class="el" href="../../dc/d3f/namespaceengine.html" title="Asynchronous engine primitives.">engine</a></dd>
<dd>
<a class="el" href="../../d6/d74/structdynamic__config_1_1Diff.html" title="Helper class for subscribing to dynamic-config updates with a custom callback.">dynamic_config::Diff</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2e/source_8hpp_source.html#l00163">163</a> of file <a class="el" href="../../d2/d2e/source_8hpp_source.html">source.hpp</a>.</p>

</div>
</div>
<a id="ad7ed3eb0541b0252e20b7719a3dcb3bc" name="ad7ed3eb0541b0252e20b7719a3dcb3bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ed3eb0541b0252e20b7719a3dcb3bc">&#9670;&#160;</a></span>UpdateAndListen() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Class &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html">concurrent::AsyncEventSubscriberScope</a> dynamic_config::Source::UpdateAndListen </td>
          <td>(</td>
          <td class="paramtype">Class *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(Class::*)(const <a class="el" href="../../de/d96/classdynamic__config_1_1Snapshot.html">dynamic_config::Snapshot</a> &amp;config)</td>          <td class="paramname"><span class="paramname"><em>func</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Subscribes to dynamic-config updates using a member function. Also immediately invokes the function with the current config snapshot (this invocation will be executed synchronously).</p>
<dl class="section note"><dt>Note</dt><dd>Callbacks occur in full accordance with <code><a class="el" href="../../d3/da0/classcomponents_1_1DynamicConfigClientUpdater.html" title="Component that does a periodic update of runtime configs.">components::DynamicConfigClientUpdater</a></code> options.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>the subscriber, which is the owner of the listener method, and is also used as the unique identifier of the subscription </td></tr>
    <tr><td class="paramname">name</td><td>the name of the subscriber, for diagnostic purposes </td></tr>
    <tr><td class="paramname">func</td><td>the listener method, named <code>OnConfigUpdate</code> by convention. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a <code><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html" title="Manages the subscription to events from an AsyncEventSource.">concurrent::AsyncEventSubscriberScope</a></code> controlling the subscription, which should be stored as a member in the subscriber; <code>Unsubscribe</code> should be called explicitly</dd></dl>
<dl class="section see"><dt>See also</dt><dd>based on <a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html" title="The read-only side of an event channel. Events are delivered to listeners in a strict FIFO order,...">concurrent::AsyncEventSource</a> <a class="el" href="../../dc/d3f/namespaceengine.html" title="Asynchronous engine primitives.">engine</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2e/source_8hpp_source.html#l00120">120</a> of file <a class="el" href="../../d2/d2e/source_8hpp_source.html">source.hpp</a>.</p>

</div>
</div>
<a id="ae2117a570a138b52449b5fdbd3b7a678" name="ae2117a570a138b52449b5fdbd3b7a678"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2117a570a138b52449b5fdbd3b7a678">&#9670;&#160;</a></span>UpdateAndListen() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Class , typename... Keys&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html">concurrent::AsyncEventSubscriberScope</a> dynamic_config::Source::UpdateAndListen </td>
          <td>(</td>
          <td class="paramtype">Class *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(Class::*)(const <a class="el" href="../../de/d96/classdynamic__config_1_1Snapshot.html">dynamic_config::Snapshot</a> &amp;config)</td>          <td class="paramname"><span class="paramname"><em>func</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Keys &amp;...</td>          <td class="paramname"><span class="paramname"><em>keys</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Subscribes to updates of a subset of all configs. </p>
<p>Subscribes to dynamic-config updates using a member function, named <code>OnConfigUpdate</code> by convention. The function will be invoked if at least one of the configs has been changed since the previous invocation. So at the first time immediately invokes the function with the current config snapshot (this invocation will be executed synchronously).</p>
<dl class="section note"><dt>Note</dt><dd>Сallbacks occur only if one of the passed config is changed. This is true under any <a class="el" href="../../d3/da0/classcomponents_1_1DynamicConfigClientUpdater.html" title="Component that does a periodic update of runtime configs.">components::DynamicConfigClientUpdater</a> options.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>To use this function, configs must have the <code>operator==</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>the subscriber, which is the owner of the listener method, and is also used as the unique identifier of the subscription </td></tr>
    <tr><td class="paramname">name</td><td>the name of the subscriber, for diagnostic purposes </td></tr>
    <tr><td class="paramname">func</td><td>the listener method, named <code>OnConfigUpdate</code> by convention. </td></tr>
    <tr><td class="paramname">keys</td><td>config objects, specializations of <code><a class="el" href="../../d3/dc3/classdynamic__config_1_1Key.html" title="A config key is a unique identifier for a config variable.">dynamic_config::Key</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a <code><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html" title="Manages the subscription to events from an AsyncEventSource.">concurrent::AsyncEventSubscriberScope</a></code> controlling the subscription, which should be stored as a member in the subscriber; <code>Unsubscribe</code> should be called explicitly</dd></dl>
<dl class="section see"><dt>See also</dt><dd>based on <a class="el" href="../../dc/d11/classconcurrent_1_1AsyncEventSource.html" title="The read-only side of an event channel. Events are delivered to listeners in a strict FIFO order,...">concurrent::AsyncEventSource</a> <a class="el" href="../../dc/d3f/namespaceengine.html" title="Asynchronous engine primitives.">engine</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2e/source_8hpp_source.html#l00193">193</a> of file <a class="el" href="../../d2/d2e/source_8hpp_source.html">source.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>userver/dynamic_config/<a class="el" href="../../d2/d2e/source_8hpp_source.html">source.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>dynamic_config</b></li><li class="navelem"><a class="el" href="../../d1/d22/classdynamic__config_1_1Source.html">Source</a></li>
    <li class="footer">Generated on Mon Oct 21 2024 13:56:02 for userver by
    <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.10.0</li>
  </ul>
</div>
<script type="text/javascript" src="../../codeHighlight.js"></script>
<script type="text/javascript" src="../../telegramLanguage.js"></script>
<script type="text/javascript" src="../../styledBtn.js"></script>
<script type="text/javascript" src="../../search.js"></script>
<script type="text/javascript" src="../../header.js"></script>
<script type="text/javascript" src="../../searchHighlight.js"></script>
<script>
  const addLinks = () =>  {
      const links = document.createElement('div')
      links.id = 'links';
      links.innerHTML = `
          <a href="https://github.com/userver-framework/" id='github_header' rel="noopener" target="_blank" class="titlelink">
              <img src="../../github_logo.svg" alt="Github" class="gh-logo"/>
          </a>
          <a href="https://t.me/userver_en" rel="noopener" id='telegram_channel' target="_blank" class="titlelink generic_tg_link">
              <img src="../../telegram_logo.svg" alt="Telegram"/>
          </a>
      `
      document.getElementById('main-navbar').appendChild(links);
  }
  $(function() {
    $(document).ready(function() {
      setTimeout(() => {
      init_all_results_button();
      init_search_hotkey();
      init_header();
      addLinks();
      changeTelegramChannelLanguageForRussianSpeakingUser();
      document.getElementById("side-nav").style.display = "none";
      const isLanding = document.getElementById('landing_logo_id') !== null;
      if (isLanding) return;
      highlight_code();
      styleNavButtons();
    }, 0);
    });
  });
</script>
<script type="module" src="../../toc.js"></script>
</body>
</html>
