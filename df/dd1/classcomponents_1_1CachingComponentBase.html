<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
        ym(94541714, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/94541714" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->
      <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=9"/>
      <meta name="generator" content="Doxygen 1.10.0"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <meta property="og:image" content="../../logo_in_circle.png"/>
      <meta property="og:image:alt" content="userver logo"/>
      <link rel="icon" href="../../favicon.svg">
      <title>userver: components::CachingComponentBase&lt; T &gt; Class Template Reference</title>
      <!-- Roboto fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <!-- Roboto fonts -->
      <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
      <script type="text/javascript" src="../../jquery.js"></script>
      <!-- Highlight.js -->
      <link rel="stylesheet" href="../../highlightjs.css">
      <script src="../../highlight.min.js"></script>
      <!-- Highlight.js -->
      <!-- Roboto fonts -->
      <script type="text/javascript" src="../../dynsections.js"></script>
      <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
      <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
      <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
      <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" href="../../customdoxygen.css">
      <!-- Doxygen Awesome -->
      <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
      <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
        DoxygenAwesomeParagraphLink.init()
        DoxygenAwesomeInteractiveToc.topOffset = 180;
      </script>
      <!-- Doxygen Awesome -->
    </head>
    <body>
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0" style="width: 100%;">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
                <td id="projectalign">
                  <div id="projectname">
                    <a class="titlelink" href="../../index.html">userver
                    </a>
                  </div>
                  <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework</a></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('df/dd1/classcomponents_1_1CachingComponentBase.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="../../db/d9f/classcomponents_1_1CachingComponentBase-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">components::CachingComponentBase&lt; T &gt; Class Template Reference<span class="mlabels"><span class="mlabel">abstract</span></span><div class="ingroups"><a class="el" href="../../dd/d1c/group__userver__components.html">Components</a> &#124; <a class="el" href="../../da/d0c/group__userver__base__classes.html">Base Classes</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">userver/cache/caching_component_base.hpp</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename T&gt;<br />
class components::CachingComponentBase&lt; T &gt;</div><p>Base class for caching components. </p>
<p>Provides facilities for creating periodically updated caches. You need to override <a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a317ae9796c9108002c4efd1227882cf5" title="Should be overridden in a derived class to align the stored data with some data source.">cache::CacheUpdateTrait::Update</a> then call <a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a990a4035c1d2e9e3b2b318d4aae8435a" title="Starts periodic updates.">cache::CacheUpdateTrait::StartPeriodicUpdates</a> after setup and <a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a9115b904029f229500eb347cc6b28c03" title="Stops periodic updates.">cache::CacheUpdateTrait::StopPeriodicUpdates</a> before teardown. You can also override cache::CachingComponentBase::PreAssignCheck and set has-pre-assign-check: true in the static config to enable check.</p>
<p>Caching components must be configured in service config (see options below) and may be reconfigured dynamically via <a class="el" href="../../dd/d1a/classcomponents_1_1DynamicConfig.html" title="Component that stores the dynamic config.">components::DynamicConfig</a>.</p>
<p><a class="el" href="../../d5/d2d/md_en_2userver_2caches.html">Basics of Caches</a> provide a more detailed introduction.</p>
<h2><a class="anchor" id="autotoc_md877"></a>
Dynamic config</h2>
<ul>
<li><a class="el" href="../../de/d10/md_en_2schemas_2dynamic__configs.html#USERVER_CACHES">USERVER_CACHES</a></li>
<li><a class="el" href="../../de/d10/md_en_2schemas_2dynamic__configs.html#USERVER_DUMPS">USERVER_DUMPS</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md878"></a>
Static options:</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">update-types   </td><td class="markdownTableBodyNone">specifies whether incremental and/or full updates will be used   </td><td class="markdownTableBodyNone">see below    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">update-interval   </td><td class="markdownTableBodyNone">(<em>required</em>) interval between Update invocations   </td><td class="markdownTableBodyNone">&ndash;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">update-jitter   </td><td class="markdownTableBodyNone">max. amount of time by which update-interval may be adjusted for requests dispersal   </td><td class="markdownTableBodyNone">update_interval / 10    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">full-update-interval   </td><td class="markdownTableBodyNone">interval between full updates   </td><td class="markdownTableBodyNone">&ndash;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">full-update-jitter   </td><td class="markdownTableBodyNone">max. amount of time by which full-update-interval may be adjusted for requests dispersal   </td><td class="markdownTableBodyNone">full-update-interval / 10    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">updates-enabled   </td><td class="markdownTableBodyNone">if false, cache updates are disabled (except for the first one if !first-update-fail-ok)   </td><td class="markdownTableBodyNone">true    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">first-update-fail-ok   </td><td class="markdownTableBodyNone">whether first update failure is non-fatal; see also <a class="el" href="#a6cfffc2be9748626fce79a1e282ca00c">MayReturnNull</a>   </td><td class="markdownTableBodyNone">false    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">task-processor   </td><td class="markdownTableBodyNone">the name of the TaskProcessor for running DoWork   </td><td class="markdownTableBodyNone">main-task-processor    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">config-settings   </td><td class="markdownTableBodyNone">enables dynamic reconfiguration with CacheConfigSet   </td><td class="markdownTableBodyNone">true    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">exception-interval   </td><td class="markdownTableBodyNone">Used instead of <code>update-interval</code> in case of exception   </td><td class="markdownTableBodyNone">update_interval    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">additional-cleanup-interval   </td><td class="markdownTableBodyNone">how often to run background RCU garbage collector   </td><td class="markdownTableBodyNone">10 seconds    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">is-strong-period   </td><td class="markdownTableBodyNone">whether to include Update execution time in update-interval   </td><td class="markdownTableBodyNone">false    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">testsuite-force-periodic-update   </td><td class="markdownTableBodyNone">override testsuite-periodic-update-enabled in <a class="el" href="../../d9/de2/classcomponents_1_1TestsuiteSupport.html" title="Testsuite support component.">TestsuiteSupport</a> component config   </td><td class="markdownTableBodyNone">&ndash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">failed-updates-before-expiration   </td><td class="markdownTableBodyNone">the number of consecutive failed updates for data expiration   </td><td class="markdownTableBodyNone">&ndash;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">has-pre-assign-check   </td><td class="markdownTableBodyNone">enables the check before changing the value in the cache, by default it is the check that the new value is not empty   </td><td class="markdownTableBodyNone">false    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">alert-on-failing-to-update-times   </td><td class="markdownTableBodyNone">fire an alert if the cache update failed specified amount of times in a row. If zero - alerts are disabled. Value from dynamic config takes priority over static   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">safe-data-lifetime   </td><td class="markdownTableBodyNone">enables awaiting data destructors in the component's destructor. Can be set to <code>false</code> if the stored data does not refer to the component and its dependencies.   </td><td class="markdownTableBodyNone">true    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dump.*   </td><td class="markdownTableBodyNone">Manages cache behavior after dump load   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dump.first-update-mode   </td><td class="markdownTableBodyNone">Behavior of update after successful load from dump. See info on modes below   </td><td class="markdownTableBodyNone">skip    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dump.first-update-type   </td><td class="markdownTableBodyNone">Update type after successful load from dump (<code>full</code>, <code>incremental</code> or <code>incremental-then-async-full</code>)   </td><td class="markdownTableBodyNone">full   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md879"></a>
Update types</h3>
<ul>
<li><code>full-and-incremental</code>: both <code>update-interval</code> and <code>full-update-interval</code> must be specified. Updates with UpdateType::kIncremental will be triggered each <code>update-interval</code> (adjusted by jitter) unless <code>full-update-interval</code> has passed and UpdateType::kFull is triggered.</li>
<li><code>only-full</code>: only <code>update-interval</code> must be specified. UpdateType::kFull will be triggered each <code>update-interval</code> (adjusted by jitter).</li>
<li><code>only-incremental</code>: only <code>update-interval</code> must be specified. UpdateType::kFull is triggered on the first update, afterwards UpdateType::kIncremental will be triggered each <code>update-interval</code> (adjusted by jitter).</li>
</ul>
<h3><a class="anchor" id="autotoc_md880"></a>
Avoiding memory leaks</h3>
<p>If you don't implement the deletion of objects that are deleted from the data source and don't use full updates, you may get an effective memory leak, because garbage objects will pile up in the cached data.</p>
<p>Calculation example:</p><ul>
<li>size of database: 1000 objects</li>
<li>removal rate: 30 objects per minute (0.5 objects per second)</li>
</ul>
<p>Let's say we allow 20% extra garbage objects in cache in addition to the actual objects from the database. In this case we need:</p>
<p>full-update-interval = (size-of-database * 20% / removal-rate) = 400s</p>
<h3><a class="anchor" id="autotoc_md881"></a>
Dealing with nullptr data in CachingComponentBase</h3>
<p>The cache can become <code>nullptr</code> through multiple ways:</p>
<ul>
<li>If the first cache update fails, and <code>first-update-fail-ok</code> config option is set to <code>true</code> (otherwise the service shutdown at start)</li>
<li>Through manually calling <a class="el" href="#a0d2ad77cfdc6f33bbf8f1f7ae6de3b24">Set</a> with <code>nullptr</code> in <a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a317ae9796c9108002c4efd1227882cf5">Update</a></li>
<li>If <code>failed-updates-before-expiration</code> is set, and that many periodic updates fail in a row</li>
</ul>
<p>By default, the cache's user can expect that the pointer returned from <a class="el" href="#a1006090c0e080a71ec8e6a9f41288d5f">Get</a> will never be <code>nullptr</code>. If the cache for some reason is in <code>nullptr</code> state, then <a class="el" href="#a1006090c0e080a71ec8e6a9f41288d5f">Get</a> will throw. This is the safe default behavior for most cases.</p>
<p>If all systems of a service are expected to work with a cache in <code>nullptr</code> state, then such a cache should override <code>MayReturnNull</code> to return <code>true</code>. It will also serve self-documentation purposes: if a cache defines <a class="el" href="#a6cfffc2be9748626fce79a1e282ca00c">MayReturnNull</a>, then pointers returned from <a class="el" href="#a1006090c0e080a71ec8e6a9f41288d5f">Get</a> should be checked for <code>nullptr</code> before usage.</p>
<h3><a class="anchor" id="autotoc_md882"></a>
<code>first-update-mode</code> modes</h3>
<p>Further customizes the behavior of <a class="el" href="../../d8/d4c/classdump_1_1Dumper.html">cache dumps</a>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Mode   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>skip</code>   </td><td class="markdownTableBodyNone">after successful load from dump, do nothing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>required</code>   </td><td class="markdownTableBodyNone">make a synchronous update of type <code>first-update-type</code>, stop the service on failure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>best-effort</code>   </td><td class="markdownTableBodyNone">make a synchronous update of type <code>first-update-type</code>, keep working and use data from dump on failure   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md883"></a>
testsuite-force-periodic-update</h3>
<p>use it to enable periodic cache update for a component in testsuite environment where testsuite-periodic-update-enabled from <a class="el" href="../../d9/de2/classcomponents_1_1TestsuiteSupport.html" title="Testsuite support component.">TestsuiteSupport</a> config is false</p>
<p>By default, update types are guessed based on update intervals presence. If both <code>update-interval</code> and <code>full-update-interval</code> are present, <code>full-and-incremental</code> types is assumed. Otherwise <code>only-full</code> is used.</p>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="../../d8/d4c/classdump_1_1Dumper.html" title="Manages dumps of a cache-like component.">dump::Dumper</a></code> for more info on persistent <a class="el" href="../../db/d8d/namespacecache.html" title="Utilities for caching.">cache</a> dumps and corresponding config options.</dd>
<dd>
<a class="el" href="../../d5/d2d/md_en_2userver_2caches.html">Basics of Caches</a>. <a class="el" href="../../d5/d79/classpytest__userver_1_1client_1_1Client.html#a09cfccdb95547def3bedd83035a0da10" title="Send request to service to update caches.">pytest_userver.client.Client.invalidate_caches()</a> for a function to force <a class="el" href="../../db/d8d/namespacecache.html" title="Utilities for caching.">cache</a> update from <a class="el" href="../../d3/d56/namespacetestsuite.html" title="Testsuite integration.">testsuite</a>. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="../../d3/db5/samples_2http_caching_2http_caching_8cpp-example.html#_a0">samples/http_caching/http_caching.cpp</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00153">153</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>
</div><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for components::CachingComponentBase&lt; T &gt;:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/deb/classcomponents_1_1CachingComponentBase__inherit__graph.svg" width="450" height="286"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a7705f2d6d5e3cebb43faf3aebdfa0a0d" id="r_a7705f2d6d5e3cebb43faf3aebdfa0a0d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7705f2d6d5e3cebb43faf3aebdfa0a0d">DataType</a> = T</td></tr>
<tr class="separator:a7705f2d6d5e3cebb43faf3aebdfa0a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a31f5021c129ab52ef4dd7be6f6f0eedc" id="r_a31f5021c129ab52ef4dd7be6f6f0eedc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31f5021c129ab52ef4dd7be6f6f0eedc">CachingComponentBase</a> (const <a class="el" href="../../db/dff/classcomponents_1_1ComponentConfig.html">ComponentConfig</a> &amp;config, const <a class="el" href="../../da/db1/classcomponents_1_1ComponentContext.html">ComponentContext</a> &amp;)</td></tr>
<tr class="separator:a31f5021c129ab52ef4dd7be6f6f0eedc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1006090c0e080a71ec8e6a9f41288d5f" id="r_a1006090c0e080a71ec8e6a9f41288d5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d70/classutils_1_1SharedReadablePtr.html">utils::SharedReadablePtr</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1006090c0e080a71ec8e6a9f41288d5f">Get</a> () const</td></tr>
<tr class="separator:a1006090c0e080a71ec8e6a9f41288d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607052516bcf51f06ebf3afc4659f77f" id="r_a607052516bcf51f06ebf3afc4659f77f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d70/classutils_1_1SharedReadablePtr.html">utils::SharedReadablePtr</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a607052516bcf51f06ebf3afc4659f77f">GetUnsafe</a> () const</td></tr>
<tr class="separator:a607052516bcf51f06ebf3afc4659f77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a8dd8aab0c2d9d98271b4c9d4591f15" id="r_a2a8dd8aab0c2d9d98271b4c9d4591f15"><td class="memTemplParams" colspan="2">template&lt;class Class &gt; </td></tr>
<tr class="memitem:a2a8dd8aab0c2d9d98271b4c9d4591f15"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html">concurrent::AsyncEventSubscriberScope</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a2a8dd8aab0c2d9d98271b4c9d4591f15">UpdateAndListen</a> (Class *obj, std::string name, void(Class::*func)(const std::shared_ptr&lt; const T &gt; &amp;))</td></tr>
<tr class="separator:a2a8dd8aab0c2d9d98271b4c9d4591f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50fdaf580d571bc83f69ebe4de90cb74" id="r_a50fdaf580d571bc83f69ebe4de90cb74"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d38/classconcurrent_1_1AsyncEventChannel.html">concurrent::AsyncEventChannel</a>&lt; const std::shared_ptr&lt; const T &gt; &amp; &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a50fdaf580d571bc83f69ebe4de90cb74">GetEventChannel</a> ()</td></tr>
<tr class="separator:a50fdaf580d571bc83f69ebe4de90cb74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad148d1c0cf0fe96407d799f5e75777cd" id="r_ad148d1c0cf0fe96407d799f5e75777cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d1f/namespacecomponents.html#a7a041524f23130330b0aec16f1e3410f">ComponentHealth</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/db4/classcomponents_1_1ComponentBase.html#ad148d1c0cf0fe96407d799f5e75777cd">GetComponentHealth</a> () const override</td></tr>
<tr class="separator:ad148d1c0cf0fe96407d799f5e75777cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5cb43003537f2f54b3efee2398fccd" id="r_a2b5cb43003537f2f54b3efee2398fccd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/db4/classcomponents_1_1ComponentBase.html#a2b5cb43003537f2f54b3efee2398fccd">OnLoadingCancelled</a> () override</td></tr>
<tr class="separator:a2b5cb43003537f2f54b3efee2398fccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51d6410c867fed6d943c9fd193eb3739" id="r_a51d6410c867fed6d943c9fd193eb3739"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/db4/classcomponents_1_1ComponentBase.html#a51d6410c867fed6d943c9fd193eb3739">OnAllComponentsAreStopping</a> () override</td></tr>
<tr class="separator:a51d6410c867fed6d943c9fd193eb3739"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a91eb4c6fa488f546fbddc25669ae270f" id="r_a91eb4c6fa488f546fbddc25669ae270f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d3e/structyaml__config_1_1Schema.html">yaml_config::Schema</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91eb4c6fa488f546fbddc25669ae270f">GetStaticConfigSchema</a> ()</td></tr>
<tr class="separator:a91eb4c6fa488f546fbddc25669ae270f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-types" name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:afcb3c9d37d64cd42ee59caf345bb0cec" id="r_afcb3c9d37d64cd42ee59caf345bb0cec"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/db4/classcomponents_1_1ComponentBase.html#afcb3c9d37d64cd42ee59caf345bb0cec">LoggableComponentBase</a> = <a class="el" href="../../d7/db4/classcomponents_1_1ComponentBase.html">ComponentBase</a></td></tr>
<tr class="memdesc:afcb3c9d37d64cd42ee59caf345bb0cec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Legacy alias, use <a class="el" href="../../d7/db4/classcomponents_1_1ComponentBase.html">ComponentBase</a> instead.  <br /></td></tr>
<tr class="separator:afcb3c9d37d64cd42ee59caf345bb0cec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa375deac7c6ea286764d3382820862c4" id="r_aa375deac7c6ea286764d3382820862c4"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#aa375deac7c6ea286764d3382820862c4">Flag</a> { <br />
&#160;&#160;<b>kNone</b> = 0
, <br />
&#160;&#160;<a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#aa375deac7c6ea286764d3382820862c4aea7df304b37501ac208cf453cb612ad3">kNoFirstUpdate</a> = 1 &lt;&lt; 0
<br />
 }</td></tr>
<tr class="memdesc:aa375deac7c6ea286764d3382820862c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Periodic update flags.  <a href="../../da/df8/classcache_1_1CacheUpdateTrait.html#aa375deac7c6ea286764d3382820862c4">More...</a><br /></td></tr>
<tr class="separator:aa375deac7c6ea286764d3382820862c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a0d2ad77cfdc6f33bbf8f1f7ae6de3b24" id="r_a0d2ad77cfdc6f33bbf8f1f7ae6de3b24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d2ad77cfdc6f33bbf8f1f7ae6de3b24">Set</a> (std::unique_ptr&lt; const T &gt; value_ptr)</td></tr>
<tr class="separator:a0d2ad77cfdc6f33bbf8f1f7ae6de3b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15f3487065167275201e48a679eef57d" id="r_a15f3487065167275201e48a679eef57d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15f3487065167275201e48a679eef57d">Set</a> (T &amp;&amp;value)</td></tr>
<tr class="memdesc:a15f3487065167275201e48a679eef57d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts.  <br /></td></tr>
<tr class="separator:a15f3487065167275201e48a679eef57d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a423361ab7bdad41e7581b5ae54743589" id="r_a423361ab7bdad41e7581b5ae54743589"><td class="memTemplParams" colspan="2">template&lt;typename... Args&gt; </td></tr>
<tr class="memitem:a423361ab7bdad41e7581b5ae54743589"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a423361ab7bdad41e7581b5ae54743589">Emplace</a> (Args &amp;&amp;... args)</td></tr>
<tr class="separator:a423361ab7bdad41e7581b5ae54743589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1de4b27b60c861babf9a57c9195a8bf" id="r_aa1de4b27b60c861babf9a57c9195a8bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1de4b27b60c861babf9a57c9195a8bf">Clear</a> ()</td></tr>
<tr class="memdesc:aa1de4b27b60c861babf9a57c9195a8bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the content of the cache by string a default constructed T.  <br /></td></tr>
<tr class="separator:aa1de4b27b60c861babf9a57c9195a8bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cfffc2be9748626fce79a1e282ca00c" id="r_a6cfffc2be9748626fce79a1e282ca00c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6cfffc2be9748626fce79a1e282ca00c">MayReturnNull</a> () const</td></tr>
<tr class="memdesc:a6cfffc2be9748626fce79a1e282ca00c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether <a class="el" href="#a1006090c0e080a71ec8e6a9f41288d5f">Get</a> is expected to return <code>nullptr</code>.  <br /></td></tr>
<tr class="separator:a6cfffc2be9748626fce79a1e282ca00c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8eff05171e08887f9e29a01d49901fc" id="r_af8eff05171e08887f9e29a01d49901fc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8eff05171e08887f9e29a01d49901fc">PreAssignCheck</a> (const T *old_value_ptr, const T *new_value_ptr) const</td></tr>
<tr class="memdesc:af8eff05171e08887f9e29a01d49901fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the option has-pre-assign-check is set true in static config, this function is called before assigning the new value to the cache.  <br /></td></tr>
<tr class="separator:af8eff05171e08887f9e29a01d49901fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9cdbfeb7144904bdfe9d799029fcbf9" id="r_aa9cdbfeb7144904bdfe9d799029fcbf9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#aa9cdbfeb7144904bdfe9d799029fcbf9">InvalidateAsync</a> (UpdateType update_type)</td></tr>
<tr class="memdesc:aa9cdbfeb7144904bdfe9d799029fcbf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Non-blocking forced cache update of specified type.  <br /></td></tr>
<tr class="separator:aa9cdbfeb7144904bdfe9d799029fcbf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed99a01e30d17df235831480156268e" id="r_a7ed99a01e30d17df235831480156268e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a7ed99a01e30d17df235831480156268e">UpdateSyncDebug</a> (UpdateType update_type)</td></tr>
<tr class="memdesc:a7ed99a01e30d17df235831480156268e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forces a cache update of specified type.  <br /></td></tr>
<tr class="separator:a7ed99a01e30d17df235831480156268e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1862cab7092e4efaf5165432d5403445" id="r_a1862cab7092e4efaf5165432d5403445"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a1862cab7092e4efaf5165432d5403445">Name</a> () const</td></tr>
<tr class="separator:a1862cab7092e4efaf5165432d5403445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7a9c61b804d5b0144e75f9673f52357" id="r_ac7a9c61b804d5b0144e75f9673f52357"><td class="memItemLeft" align="right" valign="top"><a id="ac7a9c61b804d5b0144e75f9673f52357" name="ac7a9c61b804d5b0144e75f9673f52357"></a>
AllowedUpdateTypes&#160;</td><td class="memItemRight" valign="bottom"><b>GetAllowedUpdateTypes</b> () const</td></tr>
<tr class="memdesc:ac7a9c61b804d5b0144e75f9673f52357"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update types configured for the cache. <br /></td></tr>
<tr class="separator:ac7a9c61b804d5b0144e75f9673f52357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a990a4035c1d2e9e3b2b318d4aae8435a" id="r_a990a4035c1d2e9e3b2b318d4aae8435a"><td class="memItemLeft" align="right" valign="top"><a id="a990a4035c1d2e9e3b2b318d4aae8435a" name="a990a4035c1d2e9e3b2b318d4aae8435a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>StartPeriodicUpdates</b> (<a class="el" href="../../df/d8b/classutils_1_1Flags.html">utils::Flags</a>&lt; <a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#aa375deac7c6ea286764d3382820862c4">Flag</a> &gt; flags={})</td></tr>
<tr class="memdesc:a990a4035c1d2e9e3b2b318d4aae8435a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts periodic updates. <br /></td></tr>
<tr class="separator:a990a4035c1d2e9e3b2b318d4aae8435a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9115b904029f229500eb347cc6b28c03" id="r_a9115b904029f229500eb347cc6b28c03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a9115b904029f229500eb347cc6b28c03">StopPeriodicUpdates</a> ()</td></tr>
<tr class="memdesc:a9115b904029f229500eb347cc6b28c03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops periodic updates.  <br /></td></tr>
<tr class="separator:a9115b904029f229500eb347cc6b28c03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7898262c1bdcb9b25cf624236226e3b7" id="r_a7898262c1bdcb9b25cf624236226e3b7"><td class="memItemLeft" align="right" valign="top"><a id="a7898262c1bdcb9b25cf624236226e3b7" name="a7898262c1bdcb9b25cf624236226e3b7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>AssertPeriodicUpdateStarted</b> ()</td></tr>
<tr class="separator:a7898262c1bdcb9b25cf624236226e3b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a460f652636f53664b33b6e7d1ea2cf30" id="r_a460f652636f53664b33b6e7d1ea2cf30"><td class="memItemLeft" align="right" valign="top"><a id="a460f652636f53664b33b6e7d1ea2cf30" name="a460f652636f53664b33b6e7d1ea2cf30"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>AssertPeriodicUpdateStopped</b> ()</td></tr>
<tr class="separator:a460f652636f53664b33b6e7d1ea2cf30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b6542d6bad1ad3f59926133f22571e" id="r_a07b6542d6bad1ad3f59926133f22571e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a07b6542d6bad1ad3f59926133f22571e">OnCacheModified</a> ()</td></tr>
<tr class="separator:a07b6542d6bad1ad3f59926133f22571e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a317ae9796c9108002c4efd1227882cf5" id="r_a317ae9796c9108002c4efd1227882cf5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a317ae9796c9108002c4efd1227882cf5">Update</a> (UpdateType type, const std::chrono::system_clock::time_point &amp;last_update, const std::chrono::system_clock::time_point &amp;now, UpdateStatisticsScope &amp;stats_scope)=0</td></tr>
<tr class="memdesc:a317ae9796c9108002c4efd1227882cf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should be overridden in a derived class to align the stored data with some data source.  <br /></td></tr>
<tr class="separator:a317ae9796c9108002c4efd1227882cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a005d50cad4df9eb516c1dcd08e1058b6" id="r_a005d50cad4df9eb516c1dcd08e1058b6"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a005d50cad4df9eb516c1dcd08e1058b6">WriteContents</a> (<a class="el" href="../../df/d09/classdump_1_1Writer.html">dump::Writer</a> &amp;writer, const T &amp;contents) const</td></tr>
<tr class="separator:a005d50cad4df9eb516c1dcd08e1058b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07ce7853d25b158af0514ce49c1969d0" id="r_a07ce7853d25b158af0514ce49c1969d0"><td class="memItemLeft" align="right" valign="top">virtual std::unique_ptr&lt; const T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07ce7853d25b158af0514ce49c1969d0">ReadContents</a> (<a class="el" href="../../d2/d03/classdump_1_1Reader.html">dump::Reader</a> &amp;reader) const</td></tr>
<tr class="separator:a07ce7853d25b158af0514ce49c1969d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a7705f2d6d5e3cebb43faf3aebdfa0a0d" name="a7705f2d6d5e3cebb43faf3aebdfa0a0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7705f2d6d5e3cebb43faf3aebdfa0a0d">&#9670;&#160;</a></span>DataType</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::DataType = T</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00162">162</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="afcb3c9d37d64cd42ee59caf345bb0cec" name="afcb3c9d37d64cd42ee59caf345bb0cec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcb3c9d37d64cd42ee59caf345bb0cec">&#9670;&#160;</a></span>LoggableComponentBase</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d7/db4/classcomponents_1_1ComponentBase.html#afcb3c9d37d64cd42ee59caf345bb0cec">components::ComponentBase::LoggableComponentBase</a> = <a class="el" href="../../d7/db4/classcomponents_1_1ComponentBase.html">ComponentBase</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Legacy alias, use <a class="el" href="../../d7/db4/classcomponents_1_1ComponentBase.html">ComponentBase</a> instead. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/core_2include_2userver_2components_2component__base_8hpp_source.html#l00067">67</a> of file <a class="el" href="../../d2/d2c/core_2include_2userver_2components_2component__base_8hpp_source.html">component_base.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aa375deac7c6ea286764d3382820862c4" name="aa375deac7c6ea286764d3382820862c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa375deac7c6ea286764d3382820862c4">&#9670;&#160;</a></span>Flag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#aa375deac7c6ea286764d3382820862c4">cache::CacheUpdateTrait::Flag</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Periodic update flags. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa375deac7c6ea286764d3382820862c4aea7df304b37501ac208cf453cb612ad3" name="aa375deac7c6ea286764d3382820862c4aea7df304b37501ac208cf453cb612ad3"></a>kNoFirstUpdate&#160;</td><td class="fielddoc"><p>Disable initial update on start. </p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000002">Deprecated</a></b></dt><dd>Use <code>first-update-fail-ok: true</code> instead </dd></dl>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d1/d20/cache__update__trait_8hpp_source.html#l00061">61</a> of file <a class="el" href="../../d1/d20/cache__update__trait_8hpp_source.html">cache_update_trait.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a31f5021c129ab52ef4dd7be6f6f0eedc" name="a31f5021c129ab52ef4dd7be6f6f0eedc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31f5021c129ab52ef4dd7be6f6f0eedc">&#9670;&#160;</a></span>CachingComponentBase()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::CachingComponentBase </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../db/dff/classcomponents_1_1ComponentConfig.html">ComponentConfig</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>config</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../da/db1/classcomponents_1_1ComponentContext.html">ComponentContext</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>context</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00234">234</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="acb7ab3995d07b54fadba8130523a4f52" name="acb7ab3995d07b54fadba8130523a4f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7ab3995d07b54fadba8130523a4f52">&#9670;&#160;</a></span>~CachingComponentBase()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::~<a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">CachingComponentBase</a> </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00245">245</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa1de4b27b60c861babf9a57c9195a8bf" name="aa1de4b27b60c861babf9a57c9195a8bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1de4b27b60c861babf9a57c9195a8bf">&#9670;&#160;</a></span>Clear()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::Clear </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears the content of the cache by string a default constructed T. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00311">311</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a423361ab7bdad41e7581b5ae54743589" name="a423361ab7bdad41e7581b5ae54743589"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a423361ab7bdad41e7581b5ae54743589">&#9670;&#160;</a></span>Emplace()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<div class="memtemplate">
template&lt;typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::Emplace </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...</td>          <td class="paramname"><span class="paramname"><em>args</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00306">306</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a1006090c0e080a71ec8e6a9f41288d5f" name="a1006090c0e080a71ec8e6a9f41288d5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1006090c0e080a71ec8e6a9f41288d5f">&#9670;&#160;</a></span>Get()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d70/classutils_1_1SharedReadablePtr.html">utils::SharedReadablePtr</a>&lt; T &gt; <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::Get </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>cache contents. May be <code>nullptr</code> if and only if <a class="el" href="#a6cfffc2be9748626fce79a1e282ca00c">MayReturnNull</a> returns <code>true</code>. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d9/d52/classcache_1_1EmptyCacheError.html">cache::EmptyCacheError</a></td><td>if the contents are <code>nullptr</code>, and <a class="el" href="#a6cfffc2be9748626fce79a1e282ca00c">MayReturnNull</a> returns <code>false</code> (which is the default behavior). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00254">254</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="ad148d1c0cf0fe96407d799f5e75777cd" name="ad148d1c0cf0fe96407d799f5e75777cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad148d1c0cf0fe96407d799f5e75777cd">&#9670;&#160;</a></span>GetComponentHealth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d1f/namespacecomponents.html#a7a041524f23130330b0aec16f1e3410f">ComponentHealth</a> components::ComponentBase::GetComponentHealth </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override this function to inform the world of the state of your component.</p>
<dl class="section warning"><dt>Warning</dt><dd>The function is called concurrently from multiple threads. </dd></dl>

<p>Reimplemented from <a class="el" href="../../d2/d86/classcomponents_1_1RawComponentBase.html">components::RawComponentBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/core_2include_2userver_2components_2component__base_8hpp_source.html#l00035">35</a> of file <a class="el" href="../../d2/d2c/core_2include_2userver_2components_2component__base_8hpp_source.html">component_base.hpp</a>.</p>

</div>
</div>
<a id="a50fdaf580d571bc83f69ebe4de90cb74" name="a50fdaf580d571bc83f69ebe4de90cb74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50fdaf580d571bc83f69ebe4de90cb74">&#9670;&#160;</a></span>GetEventChannel()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d38/classconcurrent_1_1AsyncEventChannel.html">concurrent::AsyncEventChannel</a>&lt; const std::shared_ptr&lt; const T &gt; &amp; &gt; &amp; <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::GetEventChannel </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00276">276</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a91eb4c6fa488f546fbddc25669ae270f" name="a91eb4c6fa488f546fbddc25669ae270f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91eb4c6fa488f546fbddc25669ae270f">&#9670;&#160;</a></span>GetStaticConfigSchema()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d3e/structyaml__config_1_1Schema.html">yaml_config::Schema</a> <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::GetStaticConfigSchema </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00388">388</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a607052516bcf51f06ebf3afc4659f77f" name="a607052516bcf51f06ebf3afc4659f77f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a607052516bcf51f06ebf3afc4659f77f">&#9670;&#160;</a></span>GetUnsafe()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d70/classutils_1_1SharedReadablePtr.html">utils::SharedReadablePtr</a>&lt; T &gt; <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::GetUnsafe </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>cache contents. May be nullptr regardless of <a class="el" href="#a6cfffc2be9748626fce79a1e282ca00c" title="Whether Get is expected to return nullptr.">MayReturnNull()</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00281">281</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="aa9cdbfeb7144904bdfe9d799029fcbf9" name="aa9cdbfeb7144904bdfe9d799029fcbf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9cdbfeb7144904bdfe9d799029fcbf9">&#9670;&#160;</a></span>InvalidateAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cache::CacheUpdateTrait::InvalidateAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d8d/namespacecache.html#a99d3f117ecf9ccf2816a2bb19c1ffce1">UpdateType</a></td>          <td class="paramname"><span class="paramname"><em>update_type</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Non-blocking forced cache update of specified type. </p>
<dl class="section see"><dt>See also</dt><dd>PeriodicTask::ForceStepAsync for behavior details </dd></dl>

</div>
</div>
<a id="a6cfffc2be9748626fce79a1e282ca00c" name="a6cfffc2be9748626fce79a1e282ca00c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cfffc2be9748626fce79a1e282ca00c">&#9670;&#160;</a></span>MayReturnNull()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::MayReturnNull </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether <a class="el" href="#a1006090c0e080a71ec8e6a9f41288d5f">Get</a> is expected to return <code>nullptr</code>. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00316">316</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a1862cab7092e4efaf5165432d5403445" name="a1862cab7092e4efaf5165432d5403445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1862cab7092e4efaf5165432d5403445">&#9670;&#160;</a></span>Name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; cache::CacheUpdateTrait::Name </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>name of the component </dd></dl>

</div>
</div>
<a id="a51d6410c867fed6d943c9fd193eb3739" name="a51d6410c867fed6d943c9fd193eb3739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51d6410c867fed6d943c9fd193eb3739">&#9670;&#160;</a></span>OnAllComponentsAreStopping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void components::ComponentBase::OnAllComponentsAreStopping </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Component may use this function to stop doing work before the stop of the components that depend on it.</p>
<p>Base components may override it and make <code>final</code> to do some work before the derived object constructor is called. Don't use it otherwise. </p>

<p>Reimplemented from <a class="el" href="../../d2/d86/classcomponents_1_1RawComponentBase.html">components::RawComponentBase</a>.</p>

<p>Reimplemented in <a class="el" href="../../d8/d65/classurabbitmq_1_1ConsumerComponentBase.html#aedc18c2554dffb0e84b93c29eee667b3">urabbitmq::ConsumerComponentBase</a>, and <a class="el" href="../../d0/d0b/classcomponents_1_1Server.html#a6fb9bddd9811fd20819fa63c3d267f3c">components::Server</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/core_2include_2userver_2components_2component__base_8hpp_source.html#l00058">58</a> of file <a class="el" href="../../d2/d2c/core_2include_2userver_2components_2component__base_8hpp_source.html">component_base.hpp</a>.</p>

</div>
</div>
<a id="a07b6542d6bad1ad3f59926133f22571e" name="a07b6542d6bad1ad3f59926133f22571e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b6542d6bad1ad3f59926133f22571e">&#9670;&#160;</a></span>OnCacheModified()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cache::CacheUpdateTrait::OnCacheModified </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called in <code><a class="el" href="#a0d2ad77cfdc6f33bbf8f1f7ae6de3b24">CachingComponentBase::Set</a></code> during update to indicate that the cached data has been modified </p>

</div>
</div>
<a id="a2b5cb43003537f2f54b3efee2398fccd" name="a2b5cb43003537f2f54b3efee2398fccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5cb43003537f2f54b3efee2398fccd">&#9670;&#160;</a></span>OnLoadingCancelled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void components::ComponentBase::OnLoadingCancelled </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called once if the creation of any other component failed. If the current component expects some other component to take any action with the current component, this call is a signal that such action may never happen due to components loading was cancelled. Application components might not want to override it. </p>

<p>Reimplemented from <a class="el" href="../../d2/d86/classcomponents_1_1RawComponentBase.html">components::RawComponentBase</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/core_2include_2userver_2components_2component__base_8hpp_source.html#l00042">42</a> of file <a class="el" href="../../d2/d2c/core_2include_2userver_2components_2component__base_8hpp_source.html">component_base.hpp</a>.</p>

</div>
</div>
<a id="af8eff05171e08887f9e29a01d49901fc" name="af8eff05171e08887f9e29a01d49901fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8eff05171e08887f9e29a01d49901fc">&#9670;&#160;</a></span>PreAssignCheck()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::PreAssignCheck </td>
          <td>(</td>
          <td class="paramtype">const T *</td>          <td class="paramname"><span class="paramname"><em>old_value_ptr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T *</td>          <td class="paramname"><span class="paramname"><em>new_value_ptr</em></span>&#160;) const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the option has-pre-assign-check is set true in static config, this function is called before assigning the new value to the cache. </p>
<dl class="section note"><dt>Note</dt><dd>old_value_ptr and new_value_ptr can be nullptr. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00393">393</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a07ce7853d25b158af0514ce49c1969d0" name="a07ce7853d25b158af0514ce49c1969d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07ce7853d25b158af0514ce49c1969d0">&#9670;&#160;</a></span>ReadContents()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; const T &gt; <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::ReadContents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d03/classdump_1_1Reader.html">dump::Reader</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>reader</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00348">348</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a0d2ad77cfdc6f33bbf8f1f7ae6de3b24" name="a0d2ad77cfdc6f33bbf8f1f7ae6de3b24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d2ad77cfdc6f33bbf8f1f7ae6de3b24">&#9670;&#160;</a></span>Set() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::Set </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; const T &gt;</td>          <td class="paramname"><span class="paramname"><em>value_ptr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the new value of cache. As a result the <a class="el" href="#a1006090c0e080a71ec8e6a9f41288d5f">Get()</a> member function starts returning the value passed into this function after the <a class="el" href="../../da/df8/classcache_1_1CacheUpdateTrait.html#a317ae9796c9108002c4efd1227882cf5" title="Should be overridden in a derived class to align the stored data with some data source.">Update()</a> finishes.</p>
<dl class="section warning"><dt>Warning</dt><dd>Do not forget to update <a class="el" href="../../d8/db9/classcache_1_1UpdateStatisticsScope.html" title="Allows a specific cache to fill cache statistics during an Update.">cache::UpdateStatisticsScope</a>, otherwise the behavior is undefined. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00286">286</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a15f3487065167275201e48a679eef57d" name="a15f3487065167275201e48a679eef57d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15f3487065167275201e48a679eef57d">&#9670;&#160;</a></span>Set() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::Set </td>
          <td>(</td>
          <td class="paramtype">T &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>value</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00300">300</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a9115b904029f229500eb347cc6b28c03" name="a9115b904029f229500eb347cc6b28c03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9115b904029f229500eb347cc6b28c03">&#9670;&#160;</a></span>StopPeriodicUpdates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cache::CacheUpdateTrait::StopPeriodicUpdates </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops periodic updates. </p>
<dl class="section warning"><dt>Warning</dt><dd>Should be called in destructor of derived class. </dd></dl>

</div>
</div>
<a id="a317ae9796c9108002c4efd1227882cf5" name="a317ae9796c9108002c4efd1227882cf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a317ae9796c9108002c4efd1227882cf5">&#9670;&#160;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void cache::CacheUpdateTrait::Update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d8d/namespacecache.html#a99d3f117ecf9ccf2816a2bb19c1ffce1">UpdateType</a></td>          <td class="paramname"><span class="paramname"><em>type</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::chrono::system_clock::time_point &amp;</td>          <td class="paramname"><span class="paramname"><em>last_update</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::chrono::system_clock::time_point &amp;</td>          <td class="paramname"><span class="paramname"><em>now</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/db9/classcache_1_1UpdateStatisticsScope.html">UpdateStatisticsScope</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>stats_scope</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should be overridden in a derived class to align the stored data with some data source. </p>
<p><code>Update</code> implementation should do one of the following:</p>
<p>A. If the update succeeded and has changes...</p><ol type="1">
<li>call <a class="el" href="#a0d2ad77cfdc6f33bbf8f1f7ae6de3b24">CachingComponentBase::Set</a> to update the stored value and send a notification to subscribers</li>
<li>call UpdateStatisticsScope::Finish</li>
<li>return normally (an exception is allowed in edge cases)</li>
</ol>
<p>B. If the update succeeded and verified that there are no changes...</p><ol type="1">
<li>DON'T call <a class="el" href="#a0d2ad77cfdc6f33bbf8f1f7ae6de3b24">CachingComponentBase::Set</a></li>
<li>call UpdateStatisticsScope::FinishNoChanges</li>
<li>return normally (an exception is allowed in edge cases)</li>
</ol>
<p>C. If the update failed...</p><ol type="1">
<li>DON'T call <a class="el" href="#a0d2ad77cfdc6f33bbf8f1f7ae6de3b24">CachingComponentBase::Set</a></li>
<li>call UpdateStatisticsScope::FinishWithError, or...</li>
<li>throw an exception, which will be logged nicely (if there already is an exception, prefer rethrowing it instead of calling UpdateStatisticsScope::FinishWithError)</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>type of the update </td></tr>
    <tr><td class="paramname">last_update</td><td>time of the last update (value of <code>now</code> from previous invocation of Update or default constructed value if this is the first Update). </td></tr>
    <tr><td class="paramname">now</td><td>current time point</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::exception</td><td>on update failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>If <code>Update</code> returns without throwing an exception and without calling one of the <code>Finish*</code> methods, the behavior is undefined.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d2d/md_en_2userver_2caches.html">Basics of Caches</a> </dd></dl>

</div>
</div>
<a id="a2a8dd8aab0c2d9d98271b4c9d4591f15" name="a2a8dd8aab0c2d9d98271b4c9d4591f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a8dd8aab0c2d9d98271b4c9d4591f15">&#9670;&#160;</a></span>UpdateAndListen()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<div class="memtemplate">
template&lt;typename Class &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/de6/classconcurrent_1_1AsyncEventSubscriberScope.html">concurrent::AsyncEventSubscriberScope</a> <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::UpdateAndListen </td>
          <td>(</td>
          <td class="paramtype">Class *</td>          <td class="paramname"><span class="paramname"><em>obj</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string</td>          <td class="paramname"><span class="paramname"><em>name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(Class::*)(const std::shared_ptr&lt; const T &gt; &amp;)</td>          <td class="paramname"><span class="paramname"><em>func</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Subscribes to cache updates using a member function. Also immediately invokes the function with the current cache contents. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00264">264</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<a id="a7ed99a01e30d17df235831480156268e" name="a7ed99a01e30d17df235831480156268e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed99a01e30d17df235831480156268e">&#9670;&#160;</a></span>UpdateSyncDebug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cache::CacheUpdateTrait::UpdateSyncDebug </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d8d/namespacecache.html#a99d3f117ecf9ccf2816a2bb19c1ffce1">UpdateType</a></td>          <td class="paramname"><span class="paramname"><em>update_type</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Forces a cache update of specified type. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">If</td><td><code>Update</code> throws </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a005d50cad4df9eb516c1dcd08e1058b6" name="a005d50cad4df9eb516c1dcd08e1058b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a005d50cad4df9eb516c1dcd08e1058b6">&#9670;&#160;</a></span>WriteContents()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">components::CachingComponentBase</a>&lt; T &gt;::WriteContents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d09/classdump_1_1Writer.html">dump::Writer</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>writer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T &amp;</td>          <td class="paramname"><span class="paramname"><em>contents</em></span>&#160;) const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Override to use custom serialization for cache dumps </p>

<p class="definition">Definition at line <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html#l00339">339</a> of file <a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>userver/cache/<a class="el" href="../../df/d56/caching__component__base_8hpp_source.html">caching_component_base.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d0/d1f/namespacecomponents.html">components</a></li><li class="navelem"><a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html">CachingComponentBase</a></li>
    <li class="footer">Generated on Mon Oct 21 2024 13:56:01 for userver by
    <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.10.0</li>
  </ul>
</div>
<script type="text/javascript" src="../../codeHighlight.js"></script>
<script type="text/javascript" src="../../telegramLanguage.js"></script>
<script type="text/javascript" src="../../styledBtn.js"></script>
<script type="text/javascript" src="../../search.js"></script>
<script type="text/javascript" src="../../header.js"></script>
<script type="text/javascript" src="../../searchHighlight.js"></script>
<script>
  const addLinks = () =>  {
      const links = document.createElement('div')
      links.id = 'links';
      links.innerHTML = `
          <a href="https://github.com/userver-framework/" id='github_header' rel="noopener" target="_blank" class="titlelink">
              <img src="../../github_logo.svg" alt="Github" class="gh-logo"/>
          </a>
          <a href="https://t.me/userver_en" rel="noopener" id='telegram_channel' target="_blank" class="titlelink generic_tg_link">
              <img src="../../telegram_logo.svg" alt="Telegram"/>
          </a>
      `
      document.getElementById('main-navbar').appendChild(links);
  }
  $(function() {
    $(document).ready(function() {
      setTimeout(() => {
      init_all_results_button();
      init_search_hotkey();
      init_header();
      addLinks();
      changeTelegramChannelLanguageForRussianSpeakingUser();
      document.getElementById("side-nav").style.display = "none";
      const isLanding = document.getElementById('landing_logo_id') !== null;
      if (isLanding) return;
      highlight_code();
      styleNavButtons();
    }, 0);
    });
  });
</script>
<script type="module" src="../../toc.js"></script>
</body>
</html>
