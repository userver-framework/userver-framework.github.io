<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
        ym(94541714, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/94541714" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->
      <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=9"/>
      <meta name="generator" content="Doxygen 1.10.0"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <meta property="og:image" content="../../logo_in_circle.png"/>
      <meta property="og:image:alt" content="userver logo"/>
      <link rel="icon" href="../../favicon.svg">
      <title>userver: Dynamic config schemas</title>
      <!-- Roboto fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <!-- Roboto fonts -->
      <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
      <script type="text/javascript" src="../../jquery.js"></script>
      <!-- Highlight.js -->
      <link rel="stylesheet" href="../../highlightjs.css">
      <script src="../../highlight.min.js"></script>
      <!-- Highlight.js -->
      <!-- Roboto fonts -->
      <script type="text/javascript" src="../../dynsections.js"></script>
      <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
      <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
      <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
      <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" href="../../customdoxygen.css">
      <!-- Doxygen Awesome -->
      <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
      <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
        DoxygenAwesomeParagraphLink.init()
        DoxygenAwesomeInteractiveToc.topOffset = 180;
      </script>
      <!-- Doxygen Awesome -->
    </head>
    <body>
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0" style="width: 100%;">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
                <td id="projectalign">
                  <div id="projectname">
                    <a class="titlelink" href="../../index.html">userver
                    </a>
                  </div>
                  <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework</a></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('de/d10/md_en_2schemas_2dynamic__configs.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Dynamic config schemas</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md43"></a> Here you can find schemas of dynamic configs used by userver itself. For general information on dynamic configs, see <a class="el" href="../../d5/d46/md_en_2userver_2dynamic__config.html">Dynamic config</a></p>
<p><a class="anchor" id="HTTP_CLIENT_CONNECT_THROTTLE"></a></p>
<h1><a class="anchor" id="autotoc_md44"></a>
HTTP_CLIENT_CONNECT_THROTTLE</h1>
<p>Token bucket throttling options for new connections (socket(3)).</p><ul>
<li><code>*-limit</code> - token bucket size, set to <code>0</code> to disable the limit</li>
<li><code>*-per-second</code> - token bucket size refill speed</li>
</ul>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    properties:</div>
<div class="line">        http-limit:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 0</div>
<div class="line">        http-per-second:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 0</div>
<div class="line">        https-limit:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 0</div>
<div class="line">        https-per-second:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 0</div>
<div class="line">        per-host-limit:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 0</div>
<div class="line">        per-host-per-second:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 0</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    required:</div>
<div class="line">      - http-limit</div>
<div class="line">      - https-limit</div>
<div class="line">      - per-host-limit</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;http-limit&quot;</span>: 6000,</div>
<div class="line">  <span class="stringliteral">&quot;http-per-second&quot;</span>: 1500,</div>
<div class="line">  <span class="stringliteral">&quot;https-limit&quot;</span>: 100,</div>
<div class="line">  <span class="stringliteral">&quot;https-per-second&quot;</span>: 25,</div>
<div class="line">  <span class="stringliteral">&quot;per-host-limit&quot;</span>: 3000,</div>
<div class="line">  <span class="stringliteral">&quot;per-host-per-second&quot;</span>: 500</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../dd/d5a/classcomponents_1_1HttpClient.html" title="Component that manages clients::http::Client.">components::HttpClient</a>, affects the behavior of <a class="el" href="../../d5/dee/classclients_1_1http_1_1Client.html" title="HTTP client that returns a HTTP request builder from CreateRequest().">clients::http::Client</a> and all the clients that use it.</p>
<p><a class="anchor" id="HTTP_CLIENT_CONNECTION_POOL_SIZE"></a></p>
<h1><a class="anchor" id="autotoc_md45"></a>
HTTP_CLIENT_CONNECTION_POOL_SIZE</h1>
<p>Open connections pool size for curl (CURLMOPT_MAXCONNECTS). <code>-1</code> means "detect by multiplying easy handles count on 4".</p>
<div class="fragment"><div class="line">schema:</div>
<div class="line">    type: integer</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">5000</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../dd/d5a/classcomponents_1_1HttpClient.html" title="Component that manages clients::http::Client.">components::HttpClient</a>, affects the behavior of <a class="el" href="../../d5/dee/classclients_1_1http_1_1Client.html" title="HTTP client that returns a HTTP request builder from CreateRequest().">clients::http::Client</a> and all the clients that use it.</p>
<p><a class="anchor" id="MONGO_CONGESTION_CONTROL_DATABASES_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md46"></a>
MONGO_CONGESTION_CONTROL_DATABASES_SETTINGS</h1>
<p>Whether Congestion Control is enabled for specified MongoDB databases. Overrides settings from <a class="el" href="#MONGO_CONGESTION_CONTROL_ENABLED">MONGO_CONGESTION_CONTROL_ENABLED</a>.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    example: |</div>
<div class="line">        {</div>
<div class="line">            // Options for specified database.</div>
<div class="line">            &quot;mongo-stq_config&quot;: true,</div>
<div class="line">            // Default options. Applied to all not specified components.</div>
<div class="line">            // If __default__ section is not present,</div>
<div class="line">            // use settings from MONGO_CONGESTION_CONTROL_ENABLED</div>
<div class="line">            &quot;__default__&quot;: false</div>
<div class="line">        }</div>
<div class="line">    additionalProperties:</div>
<div class="line">        type: boolean</div>
</div><!-- fragment --><p>Dictionary keys can be either the service <b>component name</b> (not database name!) or <code>__default__</code>. The latter configuration is applied for every non-matching Mongo component of the service.</p>
<p>Used by <a class="el" href="../../d0/dda/classcomponents_1_1Mongo.html" title="MongoDB client component.">components::Mongo</a>, <a class="el" href="../../d2/d4a/classcomponents_1_1MultiMongo.html" title="Dynamically configurable MongoDB client component.">components::MultiMongo</a>.</p>
<p><a class="anchor" id="MONGO_CONGESTION_CONTROL_ENABLED"></a></p>
<h1><a class="anchor" id="autotoc_md47"></a>
MONGO_CONGESTION_CONTROL_ENABLED</h1>
<p>Whether Congestion Control is enabled for MongoDB</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: boolean</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">true</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/dda/classcomponents_1_1Mongo.html" title="MongoDB client component.">components::Mongo</a>, <a class="el" href="../../d2/d4a/classcomponents_1_1MultiMongo.html" title="Dynamically configurable MongoDB client component.">components::MultiMongo</a>.</p>
<p><a class="anchor" id="MONGO_CONGESTION_CONTROL_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md48"></a>
MONGO_CONGESTION_CONTROL_SETTINGS</h1>
<p>Congestion Control settings for MongoDB</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">        errors-threshold-percent:</div>
<div class="line">            description: Percent of errors to enable СС</div>
<div class="line">            type: number</div>
<div class="line">        deactivate-delta:</div>
<div class="line">            description: СС turned off if this amount of free connections is reached </div>
<div class="line">            type: integer</div>
<div class="line">        timings-burst-times-threshold:</div>
<div class="line">            description: CC is turned on if request times grow to this value</div>
<div class="line">            type: number</div>
<div class="line">        min-timings-ms:</div>
<div class="line">            description: minimal value of timeings after which the CC heuristics turn on</div>
<div class="line">            type: integer</div>
<div class="line">        min-limit:</div>
<div class="line">            description: minimal value of connections after which the CC heuristics turn on</div>
<div class="line">            type: integer</div>
<div class="line">        min-qps:</div>
<div class="line">            description: minimal value of queries per second after which the CC heuristics turn on</div>
<div class="line">            type: integer</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/dda/classcomponents_1_1Mongo.html" title="MongoDB client component.">components::Mongo</a>, <a class="el" href="../../d2/d4a/classcomponents_1_1MultiMongo.html" title="Dynamically configurable MongoDB client component.">components::MultiMongo</a>.</p>
<p><a class="anchor" id="MONGO_CONNECTION_POOL_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md49"></a>
MONGO_CONNECTION_POOL_SETTINGS</h1>
<p>Options for MongoDB connections pool. Overrides the static config values. For <a class="el" href="../../d2/d4a/classcomponents_1_1MultiMongo.html" title="Dynamically configurable MongoDB client component.">components::MultiMongo</a> all pools are updated.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    example: |</div>
<div class="line">        {</div>
<div class="line">            // Options for specified component.</div>
<div class="line">            &quot;mongo-stq_config&quot;: {</div>
<div class="line">                &quot;initial_size&quot;: 32,</div>
<div class="line">                &quot;max_size&quot;: 256,</div>
<div class="line">                &quot;idle_limit&quot;: 128,</div>
<div class="line">                &quot;connecting_limit&quot;: 8</div>
<div class="line">            },</div>
<div class="line">            // Default options. Applied to all not specified components.</div>
<div class="line">            &quot;__default__&quot;: {</div>
<div class="line">                &quot;initial_size&quot;: 16,</div>
<div class="line">                &quot;max_size&quot;: 128,</div>
<div class="line">                &quot;idle_limit&quot;: 64,</div>
<div class="line">                &quot;connecting_limit&quot;: 8</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    additionalProperties:</div>
<div class="line">        $ref: &quot;#/definitions/PoolSettings&quot;</div>
<div class="line">    definitions:</div>
<div class="line">        PoolSettings:</div>
<div class="line">            type: object</div>
<div class="line">            additionalProperties: false</div>
<div class="line">            properties:</div>
<div class="line">                initial_size:</div>
<div class="line">                    type: integer</div>
<div class="line">                    minimum: 0</div>
<div class="line">                    description: number of connections created initially.</div>
<div class="line">                max_size:</div>
<div class="line">                    type: integer</div>
<div class="line">                    minimum: 1</div>
<div class="line">                    description: limit for total connections number.</div>
<div class="line">                idle_limit:</div>
<div class="line">                    type: integer</div>
<div class="line">                    minimum: 1</div>
<div class="line">                    description: limit for idle connections number.</div>
<div class="line">                connecting_limit:</div>
<div class="line">                    type: integer</div>
<div class="line">                    minimum: 0</div>
<div class="line">                    description: limit for establishing connections number.</div>
<div class="line">            required:</div>
<div class="line">              - max_size</div>
<div class="line">              - connecting_limit</div>
</div><!-- fragment --><p>Dictionary keys can be either the service <b>component name</b> (not database name!) or <code>__default__</code>. The latter configuration is applied for every non-matching Mongo component of the service.</p>
<p>Used by <a class="el" href="../../d0/dda/classcomponents_1_1Mongo.html" title="MongoDB client component.">components::Mongo</a>, <a class="el" href="../../d2/d4a/classcomponents_1_1MultiMongo.html" title="Dynamically configurable MongoDB client component.">components::MultiMongo</a>.</p>
<p><a class="anchor" id="MONGO_DEFAULT_MAX_TIME_MS"></a></p>
<h1><a class="anchor" id="autotoc_md50"></a>
MONGO_DEFAULT_MAX_TIME_MS</h1>
<p>Dynamic config that controls default $maxTimeMS for mongo requests (0 - disables default timeout).</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 0</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">200</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/dda/classcomponents_1_1Mongo.html" title="MongoDB client component.">components::Mongo</a>, <a class="el" href="../../d2/d4a/classcomponents_1_1MultiMongo.html" title="Dynamically configurable MongoDB client component.">components::MultiMongo</a>.</p>
<p><a class="anchor" id="MONGO_DEADLINE_PROPAGATION_ENABLED_V2"></a></p>
<h1><a class="anchor" id="autotoc_md51"></a>
MONGO_DEADLINE_PROPAGATION_ENABLED_V2</h1>
<p>Dynamic config that controls whether task-inherited deadline is accounted for while executing mongodb queries.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: boolean</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keyword">false</span></div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/dda/classcomponents_1_1Mongo.html" title="MongoDB client component.">components::Mongo</a>, <a class="el" href="../../d2/d4a/classcomponents_1_1MultiMongo.html" title="Dynamically configurable MongoDB client component.">components::MultiMongo</a>.</p>
<p><a class="anchor" id="POSTGRES_DEFAULT_COMMAND_CONTROL"></a></p>
<h1><a class="anchor" id="autotoc_md52"></a>
POSTGRES_DEFAULT_COMMAND_CONTROL</h1>
<p>Dynamic config that controls default network and statement timeouts. Overrides the built-in timeouts from <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html#abd1859637d5d430e30cc1417d4b11c98" title="Default command control.">components::Postgres::kDefaultCommandControl</a>, but could be overridden by <a class="el" href="#POSTGRES_HANDLERS_COMMAND_CONTROL">POSTGRES_HANDLERS_COMMAND_CONTROL</a>, <a class="el" href="#POSTGRES_QUERIES_COMMAND_CONTROL">POSTGRES_QUERIES_COMMAND_CONTROL</a> and <a class="el" href="../../d2/dcb/structstorages_1_1postgres_1_1CommandControl.html">storages::postgres::CommandControl</a>.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties: false</div>
<div class="line">properties:</div>
<div class="line">  network_timeout_ms:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
<div class="line">  statement_timeout_ms:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;network_timeout_ms&quot;</span>: 750,</div>
<div class="line">  <span class="stringliteral">&quot;statement_timeout_ms&quot;</span>: 500</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html" title="PosgreSQL client component.">components::Postgres</a>.</p>
<p><a class="anchor" id="POSTGRES_HANDLERS_COMMAND_CONTROL"></a></p>
<h1><a class="anchor" id="autotoc_md53"></a>
POSTGRES_HANDLERS_COMMAND_CONTROL</h1>
<p>Dynamic config that controls per-handle statement and network timeouts. Overrides <a class="el" href="#POSTGRES_DEFAULT_COMMAND_CONTROL">POSTGRES_DEFAULT_COMMAND_CONTROL</a> and built-in timeouts from <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html#abd1859637d5d430e30cc1417d4b11c98" title="Default command control.">components::Postgres::kDefaultCommandControl</a>, but may be overridden by <a class="el" href="#POSTGRES_QUERIES_COMMAND_CONTROL">POSTGRES_QUERIES_COMMAND_CONTROL</a> and <a class="el" href="../../d2/dcb/structstorages_1_1postgres_1_1CommandControl.html">storages::postgres::CommandControl</a>.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties:</div>
<div class="line">  $ref: &quot;#/definitions/CommandControlByMethodMap&quot;</div>
<div class="line">definitions:</div>
<div class="line">  CommandControlByMethodMap:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties:</div>
<div class="line">      $ref: &quot;#/definitions/CommandControl&quot;</div>
<div class="line">  CommandControl:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">      network_timeout_ms:</div>
<div class="line">        type: integer</div>
<div class="line">        minimum: 1</div>
<div class="line">      statement_timeout_ms:</div>
<div class="line">        type: integer</div>
<div class="line">        minimum: 1</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;/v2/rules/create&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;POST&quot;</span>: {</div>
<div class="line">      <span class="stringliteral">&quot;network_timeout_ms&quot;</span>: 500,</div>
<div class="line">      <span class="stringliteral">&quot;statement_timeout_ms&quot;</span>: 250</div>
<div class="line">    }</div>
<div class="line">  },</div>
<div class="line">  <span class="stringliteral">&quot;/v2/rules/select&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;POST&quot;</span>: {</div>
<div class="line">      <span class="stringliteral">&quot;network_timeout_ms&quot;</span>: 70,</div>
<div class="line">      <span class="stringliteral">&quot;statement_timeout_ms&quot;</span>: 30</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html" title="PosgreSQL client component.">components::Postgres</a>.</p>
<p><a class="anchor" id="POSTGRES_QUERIES_COMMAND_CONTROL"></a></p>
<h1><a class="anchor" id="autotoc_md54"></a>
POSTGRES_QUERIES_COMMAND_CONTROL</h1>
<p>Dynamic config that controls per-query/per-transaction statement and network timeouts, if those were not explicitly set via <a class="el" href="../../d2/dcb/structstorages_1_1postgres_1_1CommandControl.html">storages::postgres::CommandControl</a>. Overrides the <a class="el" href="#POSTGRES_HANDLERS_COMMAND_CONTROL">POSTGRES_HANDLERS_COMMAND_CONTROL</a>, <a class="el" href="#POSTGRES_QUERIES_COMMAND_CONTROL">POSTGRES_QUERIES_COMMAND_CONTROL</a>, <a class="el" href="#POSTGRES_DEFAULT_COMMAND_CONTROL">POSTGRES_DEFAULT_COMMAND_CONTROL</a>, and built-in timeouts from <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html#abd1859637d5d430e30cc1417d4b11c98" title="Default command control.">components::Postgres::kDefaultCommandControl</a>.</p>
<p>Transaction timeouts in POSTGRES_QUERIES_COMMAND_CONTROL override the per-query timeouts in POSTGRES_QUERIES_COMMAND_CONTROL, so the latter are ignored if transaction timeouts are set.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties:</div>
<div class="line">  $ref: &quot;#/definitions/CommandControl&quot;</div>
<div class="line">definitions:</div>
<div class="line">  CommandControl:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">      network_timeout_ms:</div>
<div class="line">        type: integer</div>
<div class="line">        minimum: 1</div>
<div class="line">      statement_timeout_ms:</div>
<div class="line">        type: integer</div>
<div class="line">        minimum: 1</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;cleanup_processed_data&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;network_timeout_ms&quot;</span>: 92000,</div>
<div class="line">    <span class="stringliteral">&quot;statement_timeout_ms&quot;</span>: 90000</div>
<div class="line">  },</div>
<div class="line">  <span class="stringliteral">&quot;select_recent_users&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;network_timeout_ms&quot;</span>: 70,</div>
<div class="line">    <span class="stringliteral">&quot;statement_timeout_ms&quot;</span>: 30</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html" title="PosgreSQL client component.">components::Postgres</a>.</p>
<p><a class="anchor" id="POSTGRES_CONNECTION_POOL_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md55"></a>
POSTGRES_CONNECTION_POOL_SETTINGS</h1>
<p>Dynamic config that controls connection pool settings of PostgreSQL driver.</p>
<p>Dictionary keys can be either the service <b>component name</b> (not database name!) or <code>__default__</code>. The latter configuration is applied for every non-matching PostgreSQL component of the service.</p>
<p>Take note that it overrides the static configuration values of the service!</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties:</div>
<div class="line">  $ref: &quot;#/definitions/PoolSettings&quot;</div>
<div class="line">definitions:</div>
<div class="line">  PoolSettings:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">      min_pool_size:</div>
<div class="line">        type: integer</div>
<div class="line">        minimum: 0</div>
<div class="line">      max_pool_size:</div>
<div class="line">        type: integer</div>
<div class="line">        minimum: 1</div>
<div class="line">      max_queue_size:</div>
<div class="line">        type: integer</div>
<div class="line">        minimum: 1</div>
<div class="line">      connecting_limit:</div>
<div class="line">        type: integer</div>
<div class="line">        minimum: 0</div>
<div class="line">    required:</div>
<div class="line">      - min_pool_size</div>
<div class="line">      - max_pool_size</div>
<div class="line">      - max_queue_size</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;__default__&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;min_pool_size&quot;</span>: 4,</div>
<div class="line">    <span class="stringliteral">&quot;max_pool_size&quot;</span>: 15,</div>
<div class="line">    <span class="stringliteral">&quot;max_queue_size&quot;</span>: 200,</div>
<div class="line">    <span class="stringliteral">&quot;connecting_limit&quot;</span>: 10</div>
<div class="line">  },</div>
<div class="line">  <span class="stringliteral">&quot;postgresql-orders&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;min_pool_size&quot;</span>: 8,</div>
<div class="line">    <span class="stringliteral">&quot;max_pool_size&quot;</span>: 50,</div>
<div class="line">    <span class="stringliteral">&quot;max_queue_size&quot;</span>: 200,</div>
<div class="line">    <span class="stringliteral">&quot;connecting_limit&quot;</span>: 8</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html" title="PosgreSQL client component.">components::Postgres</a>.</p>
<p><a class="anchor" id="POSTGRES_TOPOLOGY_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md56"></a>
POSTGRES_TOPOLOGY_SETTINGS</h1>
<p>Dynamic config that controls topology settings of service's PostgreSQL components.</p>
<p>Dictionary keys can be either the service <b>component name</b> (not database name!) or <code>__default__</code>. The latter configuration is applied for every non-matching PostgreSQL component of the service.</p>
<p>Take note that it overrides the static configuration values of the service!</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties: false</div>
<div class="line">properties:</div>
<div class="line">    max_replication_lag_ms:</div>
<div class="line">      type: integer</div>
<div class="line">      minimum: 0</div>
<div class="line">      description: maximum allowed replication lag. If equals 0 no replication </div>
<div class="line">      lag checks are performed</div>
<div class="line">required:</div>
<div class="line">  - max_replication_lag_ms</div>
</div><!-- fragment --><p><b>Example</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;__default__&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;max_replication_lag_ms&quot;</span>: 60000</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html" title="PosgreSQL client component.">components::Postgres</a>.</p>
<p><a class="anchor" id="POSTGRES_CONNECTION_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md57"></a>
POSTGRES_CONNECTION_SETTINGS</h1>
<p>Dynamic config that controls settings for newly created connections of PostgreSQL driver.</p>
<p>Dictionary keys can be either the service <b>component name</b> (not database name!) or <code>__default__</code>. The latter configuration is applied for every non-matching PostgreSQL component of the service.</p>
<p>Take note that it overrides the static configuration values of the service!</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties: false</div>
<div class="line">properties:</div>
<div class="line">  persistent-prepared-statements:</div>
<div class="line">    type: boolean</div>
<div class="line">    default: true</div>
<div class="line">  user-types-enabled:</div>
<div class="line">    type: boolean</div>
<div class="line">    default: true</div>
<div class="line">  max-prepared-cache-size:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
<div class="line">    default: 5000</div>
<div class="line">  recent-errors-threshold:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
<div class="line">  ignore-unused-query-params:</div>
<div class="line">    type: boolean</div>
<div class="line">    default: false</div>
<div class="line">  max-ttl-sec:</div>
<div class="line">    type integer</div>
<div class="line">    minimum: 1</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;__default__&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;persistent-prepared-statements&quot;</span>: <span class="keyword">true</span>,</div>
<div class="line">    <span class="stringliteral">&quot;user-types-enabled&quot;</span>: <span class="keyword">true</span>,</div>
<div class="line">    <span class="stringliteral">&quot;max-prepared-cache-size&quot;</span>: 5000,</div>
<div class="line">    <span class="stringliteral">&quot;ignore-unused-query-params&quot;</span>: <span class="keyword">false</span>,</div>
<div class="line">    <span class="stringliteral">&quot;recent-errors-threshold&quot;</span>: 2,</div>
<div class="line">    <span class="stringliteral">&quot;max-ttl-sec&quot;</span>: 3600</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html" title="PosgreSQL client component.">components::Postgres</a>.</p>
<p><a class="anchor" id="POSTGRES_CONNLIMIT_MODE_AUTO_ENABLED"></a></p>
<h1><a class="anchor" id="autotoc_md58"></a>
POSTGRES_CONNLIMIT_MODE_AUTO_ENABLED</h1>
<p>Dynamic config that enables connlimit_mode: auto for PostgreSQL connections. Auto mode ignores static and dynamic max_connections configs and verifies that the cluster services use max_connections equals to PostgreSQL server's max_connections divided by service instance count.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">default: true</div>
<div class="line">schema:</div>
<div class="line">  type: boolean</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html" title="PosgreSQL client component.">components::Postgres</a>.</p>
<p><a class="anchor" id="POSTGRES_STATEMENT_METRICS_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md59"></a>
POSTGRES_STATEMENT_METRICS_SETTINGS</h1>
<p>Dynamic config that controls statement metrics settings for specific service.</p>
<p>Dictionary keys can be either the service <b>component name</b> (not database name!) or <code>__default__</code>. The latter configuration is applied for every non-matching PostgreSQL component of the service.</p>
<p>The value of <code>max_statement_metrics</code> controls the maximum size of LRU-cache for named statement metrics. When set to 0 (default) no metrics are being exported.</p>
<p>The exported data can be found as <code>postgresql.statement_timings</code>.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties:</div>
<div class="line">  $ref: &quot;#/definitions/StatementMetricsSettings&quot;</div>
<div class="line">definitions:</div>
<div class="line">  StatementMetricsSettings:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">      max_statement_metrics:</div>
<div class="line">        type: integer</div>
<div class="line">        minimum: 0</div>
</div><!-- fragment --><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;postgresql-database_name&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;max_statement_metrics&quot;</span>: 50</div>
<div class="line">  },</div>
<div class="line">  <span class="stringliteral">&quot;__default__&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;max_statement_metrics&quot;</span>: 150</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d1/d92/classcomponents_1_1Postgres.html" title="PosgreSQL client component.">components::Postgres</a>.</p>
<p><a class="anchor" id="REDIS_COMMANDS_BUFFERING_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md60"></a>
REDIS_COMMANDS_BUFFERING_SETTINGS</h1>
<p>Dynamic config that controls command buffering for specific service. Enabling of this config activates a delay in sending commands. When commands are sent, they are combined into a single tcp packet and sent together. First command arms timer and then during <code>watch_command_timer_interval_us</code> commands are accumulated in the buffer</p>
<p>Command buffering is disabled by default.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties: false</div>
<div class="line">properties:</div>
<div class="line">  buffering_enabled:</div>
<div class="line">    type: boolean</div>
<div class="line">  commands_buffering_threshold:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
<div class="line">  watch_command_timer_interval_us:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 0</div>
<div class="line">required:</div>
<div class="line">  - buffering_enabled</div>
<div class="line">  - watch_command_timer_interval_us</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;buffering_enabled&quot;</span>: <span class="keyword">true</span>,</div>
<div class="line">  <span class="stringliteral">&quot;commands_buffering_threshold&quot;</span>: 10,</div>
<div class="line">  <span class="stringliteral">&quot;watch_command_timer_interval_us&quot;</span>: 1000</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p><a class="anchor" id="REDIS_DEFAULT_COMMAND_CONTROL"></a></p>
<h1><a class="anchor" id="autotoc_md61"></a>
REDIS_DEFAULT_COMMAND_CONTROL</h1>
<p>Dynamic config that overrides the default timeouts, number of retries and server selection strategy for redis commands.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties: false</div>
<div class="line">properties:</div>
<div class="line">  best_dc_count:</div>
<div class="line">    type: integer</div>
<div class="line">  max_ping_latency_ms:</div>
<div class="line">    type: integer</div>
<div class="line">  max_retries:</div>
<div class="line">    type: integer</div>
<div class="line">  strategy:</div>
<div class="line">    enum:</div>
<div class="line">      - default</div>
<div class="line">      - every_dc</div>
<div class="line">      - local_dc_conductor</div>
<div class="line">      - nearest_server_ping</div>
<div class="line">    type: string</div>
<div class="line">  timeout_all_ms:</div>
<div class="line">    type: integer</div>
<div class="line">  timeout_single_ms:</div>
<div class="line">    type: integer</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;best_dc_count&quot;</span>: 0,</div>
<div class="line">  <span class="stringliteral">&quot;max_ping_latency_ms&quot;</span>: 0,</div>
<div class="line">  <span class="stringliteral">&quot;max_retries&quot;</span>: 4,</div>
<div class="line">  <span class="stringliteral">&quot;strategy&quot;</span>: <span class="stringliteral">&quot;default&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;timeout_all_ms&quot;</span>: 2000,</div>
<div class="line">  <span class="stringliteral">&quot;timeout_single_ms&quot;</span>: 500</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p><a class="anchor" id="REDIS_METRICS_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md62"></a>
REDIS_METRICS_SETTINGS</h1>
<p>Dynamic config that controls the metric settings for specific service.</p>
<p>Dictionary keys can be either the <b>database name</b> (not the component name!) or <code>__default__</code>. The latter configuration is applied for every non-matching Redis database/sentinel of the service.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties:</div>
<div class="line">  $ref: &quot;#/definitions/MetricsSettings&quot;</div>
<div class="line">definitions:</div>
<div class="line">  MetricsSettings:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">      timings-enabled:</div>
<div class="line">        type: boolean</div>
<div class="line">        default: true</div>
<div class="line">        description: enable timings statistics</div>
<div class="line">      command-timings-enabled:</div>
<div class="line">        type: boolean</div>
<div class="line">        default: false</div>
<div class="line">        description: enable statistics for individual commands</div>
<div class="line">      request-sizes-enabled:</div>
<div class="line">        type: boolean</div>
<div class="line">        default: false</div>
<div class="line">        description: enable request sizes statistics</div>
<div class="line">      reply-sizes-enabled:</div>
<div class="line">        type: boolean</div>
<div class="line">        default: false</div>
<div class="line">        description: enable response sizes statistics</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;redis-database_name&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;timings-enabled&quot;</span>: <span class="keyword">true</span>,</div>
<div class="line">    <span class="stringliteral">&quot;command-timings-enabled&quot;</span>: <span class="keyword">false</span>,</div>
<div class="line">    <span class="stringliteral">&quot;request-sizes-enabled&quot;</span>: <span class="keyword">false</span>,</div>
<div class="line">    <span class="stringliteral">&quot;reply-sizes-enabled&quot;</span>: <span class="keyword">false</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p><a class="anchor" id="REDIS_PUBSUB_METRICS_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md63"></a>
REDIS_PUBSUB_METRICS_SETTINGS</h1>
<p>Dynamic config that controls the redis pubsub metric settings for specific service.</p>
<p>Dictionary keys can be either the <b>database name</b> (not the component name!) or <code>__default__</code>. The latter configuration is applied for every non-matching Redis database/sentinel of the service.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties:</div>
<div class="line">  $ref: &quot;#/definitions/PubsubMetricsSettings&quot;</div>
<div class="line">definitions:</div>
<div class="line">  PubsubMetricsSettings:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">      per-shard-stats-enabled:</div>
<div class="line">        type: boolean</div>
<div class="line">        default: true</div>
<div class="line">        description: enable collecting statistics by shard</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;redis-database_name&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;per-shard-stats-enabled&quot;</span>: <span class="keyword">true</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p><a class="anchor" id="REDIS_RETRY_BUDGET_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md64"></a>
REDIS_RETRY_BUDGET_SETTINGS</h1>
<p>Dynamic config that controls the retry budget (throttling) settings for <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p>Dictionary keys can be either the <b>database name</b> (not the component name!) or <code>__default__</code>. The latter configuration is applied for every non-matching Redis database/sentinel of the service.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties:</div>
<div class="line">  $ref: &#39;#/definitions/BaseSettings&#39;</div>
<div class="line">definitions:</div>
<div class="line">  BaseSettings:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">        enabled:</div>
<div class="line">          description: Enable retry budget for database</div>
<div class="line">          type: boolean</div>
<div class="line">        max-tokens:</div>
<div class="line">          description: Number of tokens to start with</div>
<div class="line">          type: number</div>
<div class="line">          maximum: 1000</div>
<div class="line">          minimum: 1</div>
<div class="line">        token-ratio:</div>
<div class="line">          description: Amount of tokens added on each successful request</div>
<div class="line">          type: number</div>
<div class="line">          maximum: 1</div>
<div class="line">          minimum: 0.001</div>
<div class="line">    required:</div>
<div class="line">      - enabled</div>
<div class="line">      - max-tokens</div>
<div class="line">      - token-ratio</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;__default__&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;max-tokens&quot;</span>: 100,</div>
<div class="line">    <span class="stringliteral">&quot;token-ratio&quot;</span>: 0.1,</div>
<div class="line">    <span class="stringliteral">&quot;enabled&quot;</span>: <span class="keyword">true</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p><a class="anchor" id="REDIS_REPLICA_MONITORING_SETTINGS"></a></p>
<h1><a class="anchor" id="autotoc_md65"></a>
REDIS_REPLICA_MONITORING_SETTINGS</h1>
<p>Настройки отслеживания синхронизации реплик redis</p>
<p>Dynamic config that controls the monitoring settings for synchronizing replicas.</p>
<p>Dictionary keys can be either the <b>database name</b> (not the component name!) or <code>__default__</code>. The latter configuration is applied for every non-matching Redis database/sentinel of the service.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties:</div>
<div class="line">  $ref: &#39;#/definitions/BaseSettings&#39;</div>
<div class="line">definitions:</div>
<div class="line">  BaseSettings:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">      enable-monitoring:</div>
<div class="line">        description: set to `true` to turn on monitoring</div>
<div class="line">        type: boolean</div>
<div class="line">      forbid-requests-to-syncing-replicas:</div>
<div class="line">        description: set to true to forbid requests to syncing replicas</div>
<div class="line">        type: boolean</div>
<div class="line">    required:</div>
<div class="line">      - enable-monitoring</div>
<div class="line">      - forbid-requests-to-syncing-replicas</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;__default__&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;enable-monitoring&quot;</span>: <span class="keyword">false</span>,</div>
<div class="line">    <span class="stringliteral">&quot;forbid-requests-to-syncing-replicas&quot;</span>: <span class="keyword">false</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><a class="anchor" id="REDIS_SUBSCRIBER_DEFAULT_COMMAND_CONTROL"></a></p>
<h1><a class="anchor" id="autotoc_md66"></a>
REDIS_SUBSCRIBER_DEFAULT_COMMAND_CONTROL</h1>
<p>The same as <a class="el" href="#REDIS_DEFAULT_COMMAND_CONTROL">REDIS_DEFAULT_COMMAND_CONTROL</a> but for subscription clients.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties: false</div>
<div class="line">properties:</div>
<div class="line">  timeout_single_ms:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
<div class="line">  timeout_all_ms:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
<div class="line">  best_dc_count:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
<div class="line">  max_ping_latency_ms:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
<div class="line">  strategy:</div>
<div class="line">    type: string</div>
<div class="line">    enum:</div>
<div class="line">      - default</div>
<div class="line">      - every_dc</div>
<div class="line">      - local_dc_conductor</div>
<div class="line">      - nearest_server_ping</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;best_dc_count&quot;</span>: 0,</div>
<div class="line">  <span class="stringliteral">&quot;max_ping_latency_ms&quot;</span>: 0,</div>
<div class="line">  <span class="stringliteral">&quot;strategy&quot;</span>: <span class="stringliteral">&quot;default&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;timeout_all_ms&quot;</span>: 2000,</div>
<div class="line">  <span class="stringliteral">&quot;timeout_single_ms&quot;</span>: 500</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p><a class="anchor" id="REDIS_SUBSCRIPTIONS_REBALANCE_MIN_INTERVAL_SECONDS"></a></p>
<h1><a class="anchor" id="autotoc_md67"></a>
REDIS_SUBSCRIPTIONS_REBALANCE_MIN_INTERVAL_SECONDS</h1>
<p>Dynamic config that controls the minimal interval between redis subscription clients rebalancing.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">minimum: 0</div>
<div class="line">type: integer</div>
<div class="line">default: 30</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p><a class="anchor" id="REDIS_WAIT_CONNECTED"></a></p>
<h1><a class="anchor" id="autotoc_md68"></a>
REDIS_WAIT_CONNECTED</h1>
<p>Dynamic config that controls if services will wait for connections with redis instances.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">type: object</div>
<div class="line">additionalProperties: false</div>
<div class="line">properties:</div>
<div class="line">  mode:</div>
<div class="line">    type: string</div>
<div class="line">    enum:</div>
<div class="line">      - no_wait</div>
<div class="line">      - master</div>
<div class="line">      - slave</div>
<div class="line">      - master_or_slave</div>
<div class="line">      - master_and_slave</div>
<div class="line">  throw_on_fail:</div>
<div class="line">    type: boolean</div>
<div class="line">  timeout-ms:</div>
<div class="line">    type: integer</div>
<div class="line">    minimum: 1</div>
<div class="line">    x-taxi-cpp-type: std::chrono::milliseconds</div>
<div class="line">required:</div>
<div class="line">  - mode</div>
<div class="line">  - throw_on_fail</div>
<div class="line">  - timeout-ms</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;mode&quot;</span>: <span class="stringliteral">&quot;master_or_slave&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;throw_on_fail&quot;</span>: <span class="keyword">false</span>,</div>
<div class="line">  <span class="stringliteral">&quot;timeout-ms&quot;</span>: 11000</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/dd0/classcomponents_1_1Redis.html" title="Redis client component.">components::Redis</a>.</p>
<p><a class="anchor" id="USERVER_CACHES"></a></p>
<h1><a class="anchor" id="autotoc_md69"></a>
USERVER_CACHES</h1>
<p>Cache update dynamic parameters.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties:</div>
<div class="line">        type: object</div>
<div class="line">        additionalProperties: false</div>
<div class="line">        properties:</div>
<div class="line">            update-interval-ms:</div>
<div class="line">                type: integer</div>
<div class="line">                minimum: 1</div>
<div class="line">            update-jitter-ms:</div>
<div class="line">                type: integer</div>
<div class="line">                minimum: 0</div>
<div class="line">            full-update-interval-ms:</div>
<div class="line">                type: integer</div>
<div class="line">                minimum: 0</div>
<div class="line">            updates-enabled:</div>
<div class="line">                type: boolean</div>
<div class="line">                default: true</div>
<div class="line">            exception-interval-ms:</div>
<div class="line">                type: integer</div>
<div class="line">                minimum: 0</div>
<div class="line">            alert-on-failing-to-update-times:</div>
<div class="line">                type: integer</div>
<div class="line">                minimum: 0</div>
<div class="line">        required:</div>
<div class="line">          - update-interval-ms</div>
<div class="line">          - update-jitter-ms</div>
<div class="line">          - full-update-interval-ms</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;some-cache-name&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;full-update-interval-ms&quot;</span>: 86400000,</div>
<div class="line">    <span class="stringliteral">&quot;update-interval-ms&quot;</span>: 30000,</div>
<div class="line">    <span class="stringliteral">&quot;update-jitter-ms&quot;</span>: 1000,</div>
<div class="line">    <span class="stringliteral">&quot;alert-on-failing-to-update-times&quot;</span>: 2</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by all the caches derived from <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html" title="Base class for caching components.">components::CachingComponentBase</a>.</p>
<p><a class="anchor" id="USERVER_CANCEL_HANDLE_REQUEST_BY_DEADLINE"></a></p>
<h1><a class="anchor" id="autotoc_md70"></a>
USERVER_CANCEL_HANDLE_REQUEST_BY_DEADLINE</h1>
<p>Controls whether the http request task should be cancelled when the deadline received from the client is reached.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: boolean</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">true</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/d0b/classcomponents_1_1Server.html" title="Component that listens for incoming requests, manages incoming connections and passes the requests to...">components::Server</a>.</p>
<p><a class="anchor" id="USERVER_DEADLINE_PROPAGATION_ENABLED"></a></p>
<h1><a class="anchor" id="autotoc_md71"></a>
USERVER_DEADLINE_PROPAGATION_ENABLED</h1>
<p>When <code>false</code>, disables deadline propagation in the service. This includes:</p>
<ul>
<li>reading the task-inherited deadline from HTTP headers and gRPC metadata;</li>
<li>interrupting operations when deadline expires;</li>
<li>propagating the deadline to downstream services and databases.</li>
</ul>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: boolean</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">true</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/d0b/classcomponents_1_1Server.html" title="Component that listens for incoming requests, manages incoming connections and passes the requests to...">components::Server</a> and <a class="el" href="../../d7/d9a/classugrpc_1_1server_1_1ServerComponent.html" title="Component that configures and manages the gRPC server.">ugrpc::server::ServerComponent</a>.</p>
<p><a class="anchor" id="USERVER_DUMPS"></a></p>
<h1><a class="anchor" id="autotoc_md72"></a>
USERVER_DUMPS</h1>
<p>Dynamic dump configuration. If the options are set for some dump then those options override the static configuration.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties:</div>
<div class="line">        type: object</div>
<div class="line">        additionalProperties: false</div>
<div class="line">        properties:</div>
<div class="line">            dumps-enabled:</div>
<div class="line">                type: boolean</div>
<div class="line">            min-dump-interval:</div>
<div class="line">                description: dump interval in milliseconds</div>
<div class="line">                type: integer</div>
<div class="line">                minimum: 0</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;some-cache-name&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;dumps-enabled&quot;</span>: <span class="keyword">true</span>,</div>
<div class="line">    <span class="stringliteral">&quot;min-dump-interval&quot;</span>: 100000</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d8/d4c/classdump_1_1Dumper.html" title="Manages dumps of a cache-like component.">dump::Dumper</a>, especially by all the caches derived from <a class="el" href="../../df/dd1/classcomponents_1_1CachingComponentBase.html" title="Base class for caching components.">components::CachingComponentBase</a>.</p>
<p><a class="anchor" id="USERVER_HANDLER_STREAM_API_ENABLED"></a></p>
<h1><a class="anchor" id="autotoc_md73"></a>
USERVER_HANDLER_STREAM_API_ENABLED</h1>
<p>Sets whether Stream API should be enabled for HTTP handlers.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: boolean</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">true</div>
</div><!-- fragment --><p><a class="anchor" id="USERVER_HTTP_PROXY"></a></p>
<h1><a class="anchor" id="autotoc_md74"></a>
USERVER_HTTP_PROXY</h1>
<p>Proxy for all the HTTP and HTTPS clients. Empty string disables proxy usage.</p>
<p>Proxy string may be prefixed with <code>[scheme]://</code> to specify which kind of proxy is used. Schemes match the <a href="https://curl.se/libcurl/c/CURLOPT_PROXY.html">libcurl supported ones</a>. A proxy host string can also embed user and password.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: string</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">localhost:8090</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../dd/d5a/classcomponents_1_1HttpClient.html" title="Component that manages clients::http::Client.">components::HttpClient</a>, affects the behavior of <a class="el" href="../../d5/dee/classclients_1_1http_1_1Client.html" title="HTTP client that returns a HTTP request builder from CreateRequest().">clients::http::Client</a> and all the clients that use it.</p>
<p><a class="anchor" id="USERVER_LOG_DYNAMIC_DEBUG"></a></p>
<h1><a class="anchor" id="autotoc_md75"></a>
USERVER_LOG_DYNAMIC_DEBUG</h1>
<p>Logging per line and file overrides. Log locations are defined as path prefix from the Arcadia root ("taxi/uservices/services/"). Location of file may be followed by <code>:[line index]</code> to specify 1 exact log in that file.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">default:</div>
<div class="line">    force-enabled: []</div>
<div class="line">    force-disabled: []</div>
<div class="line"> </div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    required:</div>
<div class="line">      - force-enabled</div>
<div class="line">      - force-disabled</div>
<div class="line">    properties:</div>
<div class="line">        force-enabled:</div>
<div class="line">            type: array</div>
<div class="line">            description: Locations of logs to turn on. This option is deprecated, consider using &quot;force-enabled-level&quot; instead.</div>
<div class="line">            items:</div>
<div class="line">                type: string</div>
<div class="line"> </div>
<div class="line">        force-disabled:</div>
<div class="line">            type: array</div>
<div class="line">            description: Locations of logs to turn off, logs with level WARNING and higher will not be affected.</div>
<div class="line">                This option is deprecated, consider using &quot;force-disabled-level&quot; instead.</div>
<div class="line">            items:</div>
<div class="line">                type: string</div>
<div class="line"> </div>
<div class="line">        force-enabled-level:</div>
<div class="line">            type: object</div>
<div class="line">            description: |</div>
<div class="line">                Locations of logs to turn on with level equal or higher to given.</div>
<div class="line">                For example, to turn on all logs with level WARNING or higher in &quot;userver/grpc&quot;,</div>
<div class="line">                all logs with level DEBUG or higher in file &quot;userver/core/src/server/server.cpp&quot;</div>
<div class="line">                and 1 log (since exact line is specified) with level TRACE in file &quot;userver/core/src/server/http/http_request_parser.cpp&quot;:</div>
<div class="line">                    &quot;force-enabled-level&quot;: {</div>
<div class="line">                        &quot;taxi/uservices/userver/grpc&quot;: &quot;WARNING&quot;,</div>
<div class="line">                        &quot;taxi/uservices/userver/core/src/server/server.cpp&quot;: &quot;DEBUG&quot;,</div>
<div class="line">                        &quot;taxi/uservices/userver/core/src/server/http/http_request_parser.cpp:128&quot;: &quot;TRACE&quot;</div>
<div class="line">                    }</div>
<div class="line">            additionalProperties:</div>
<div class="line">                type: string</div>
<div class="line"> </div>
<div class="line">        force-disabled-level:</div>
<div class="line">            type: object</div>
<div class="line">            description: |</div>
<div class="line">                Locations of logs to turn off with level equal or lower to given.</div>
<div class="line">                For example, to turn off all logs with level ERROR or lower in &quot;userver/grpc&quot;,</div>
<div class="line">                all logs with level INFO or lower in file &quot;userver/core/src/server/server.cpp&quot;</div>
<div class="line">                and 1 log (since exact line is specified) with level TRACE in file &quot;userver/core/src/server/http/http_request_parser.cpp&quot;:</div>
<div class="line">                    &quot;force-disabled-level&quot;: {</div>
<div class="line">                        &quot;taxi/uservices/userver/grpc&quot;: &quot;ERROR&quot;,</div>
<div class="line">                        &quot;taxi/uservices/userver/core/src/server/server.cpp&quot;: &quot;INFO&quot;,</div>
<div class="line">                        &quot;taxi/uservices/userver/core/src/server/http/http_request_parser.cpp:128&quot;: &quot;TRACE&quot;</div>
<div class="line">                    }</div>
<div class="line">            additionalProperties:</div>
<div class="line">                type: string</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/d7a/classcomponents_1_1LoggingConfigurator.html" title="Helper component to configure logging.">components::LoggingConfigurator</a>.</p>
<p><a class="anchor" id="USERVER_LOG_REQUEST"></a></p>
<h1><a class="anchor" id="autotoc_md76"></a>
USERVER_LOG_REQUEST</h1>
<p>Controls HTTP requests and responses logging.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: boolean</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">false</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/d0b/classcomponents_1_1Server.html" title="Component that listens for incoming requests, manages incoming connections and passes the requests to...">components::Server</a>.</p>
<p><a class="anchor" id="USERVER_LOG_REQUEST_HEADERS"></a></p>
<h1><a class="anchor" id="autotoc_md77"></a>
USERVER_LOG_REQUEST_HEADERS</h1>
<p>Controls whether the logging of HTTP headers in handlers is performed.</p>
<dl class="section note"><dt>Note</dt><dd>To ensure safety, all header values will be output as <code>***</code> unless specified in <a class="el" href="#USERVER_LOG_REQUEST_HEADERS_WHITELIST">USERVER_LOG_REQUEST_HEADERS_WHITELIST</a>.</dd></dl>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: boolean</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">false</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/d0b/classcomponents_1_1Server.html" title="Component that listens for incoming requests, manages incoming connections and passes the requests to...">components::Server</a>.</p>
<p><a class="anchor" id="USERVER_LOG_REQUEST_HEADERS_WHITELIST"></a></p>
<h1><a class="anchor" id="autotoc_md78"></a>
USERVER_LOG_REQUEST_HEADERS_WHITELIST</h1>
<p>If the <a class="el" href="#USERVER_LOG_REQUEST_HEADERS">USERVER_LOG_REQUEST_HEADERS</a> option is enabled, you can control which HTTP headers are logged, including their values. Header is suitable if it exactly matches one of the values in the whitelist. Any headers that are not on the whitelist will have their values replaced with *** in the logs.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: array</div>
<div class="line">    items:</div>
<div class="line">        type: string</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">[&quot;User-Agent&quot;, &quot;Accept-Encoding&quot;]</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d6/d36/classserver_1_1handlers_1_1HttpHandlerBase.html" title="Base class for all the Userver HTTP Handlers.">server::handlers::HttpHandlerBase</a>.</p>
<p><a class="anchor" id="USERVER_LRU_CACHES"></a></p>
<h1><a class="anchor" id="autotoc_md79"></a>
USERVER_LRU_CACHES</h1>
<p>Dynamic config for controlling size and cache entry lifetime of the LRU based caches.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties:</div>
<div class="line">        $ref: &#39;#/definitions/CacheSettings&#39;</div>
<div class="line">    definitions:</div>
<div class="line">        CacheSettings:</div>
<div class="line">            type: object</div>
<div class="line">            properties:</div>
<div class="line">                size:</div>
<div class="line">                    type: integer</div>
<div class="line">                lifetime-ms:</div>
<div class="line">                    type: integer</div>
<div class="line">            required:</div>
<div class="line">              - size</div>
<div class="line">              - lifetime-ms</div>
<div class="line">            additionalProperties: false</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;some-cache-name&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;lifetime-ms&quot;</span>: 5000,</div>
<div class="line">    <span class="stringliteral">&quot;size&quot;</span>: 100000</div>
<div class="line">  },</div>
<div class="line">  <span class="stringliteral">&quot;some-other-cache-name&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;lifetime-ms&quot;</span>: 5000,</div>
<div class="line">    <span class="stringliteral">&quot;size&quot;</span>: 400000</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by all the caches derived from <a class="el" href="../../d9/d97/classcache_1_1LruCacheComponent.html" title="Base class for LRU-cache components.">cache::LruCacheComponent</a>.</p>
<p><a class="anchor" id="USERVER_NO_LOG_SPANS"></a></p>
<h1><a class="anchor" id="autotoc_md80"></a>
USERVER_NO_LOG_SPANS</h1>
<p>Prefixes or full names of <a class="el" href="../../d7/d1a/classtracing_1_1Span.html" title="Measures the execution time of the current code block, links it with the parent tracing::Spans and st...">tracing::Span</a> instances to not log.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    required:</div>
<div class="line">      - prefixes</div>
<div class="line">      - names</div>
<div class="line">    properties:</div>
<div class="line">        prefixes:</div>
<div class="line">            type: array</div>
<div class="line">            items:</div>
<div class="line">                type: string</div>
<div class="line">        names:</div>
<div class="line">            type: array</div>
<div class="line">            items:</div>
<div class="line">                type: string</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;names&quot;</span>: [</div>
<div class="line">    <span class="stringliteral">&quot;mongo_find&quot;</span></div>
<div class="line">  ],</div>
<div class="line">  <span class="stringliteral">&quot;prefixes&quot;</span>: [</div>
<div class="line">    <span class="stringliteral">&quot;http&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;handler&quot;</span></div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../d0/d7a/classcomponents_1_1LoggingConfigurator.html" title="Helper component to configure logging.">components::LoggingConfigurator</a> and all the logging facilities.</p>
<p><a class="anchor" id="USERVER_RPS_CCONTROL"></a></p>
<h1><a class="anchor" id="autotoc_md81"></a>
USERVER_RPS_CCONTROL</h1>
<p>Dynamic config for <a class="el" href="../../d0/d0b/classcomponents_1_1Server.html" title="Component that listens for incoming requests, manages incoming connections and passes the requests to...">components::Server</a> congestion control.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">        min-limit:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 1</div>
<div class="line">            description: |</div>
<div class="line">                Minimal RPS limit value.</div>
<div class="line"> </div>
<div class="line">        up-rate-percent:</div>
<div class="line">            type: number</div>
<div class="line">            minimum: 0</div>
<div class="line">            exclusiveMinimum: true</div>
<div class="line">            description: |</div>
<div class="line">                On how many percents increase the RPS limit every second if not in overloaded state.</div>
<div class="line"> </div>
<div class="line">        down-rate-percent:</div>
<div class="line">            type: number</div>
<div class="line">            minimum: 0</div>
<div class="line">            maximum: 100</div>
<div class="line">            exclusiveMinimum: true</div>
<div class="line">            description: |</div>
<div class="line">                On how many percents decrease the RPS limit every second if in overloaded state.</div>
<div class="line"> </div>
<div class="line">        overload-on-seconds:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 1</div>
<div class="line">            description: |</div>
<div class="line">                How many seconds overload should be higher than `up-level`,</div>
<div class="line">                to switch to overload state and start limiting RPS.</div>
<div class="line"> </div>
<div class="line">        overload-off-seconds:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 1</div>
<div class="line">            description: |</div>
<div class="line">                How many seconds overload should be higher than `down-level`,</div>
<div class="line">                to switch from overload state and the RPS limit start increasing.</div>
<div class="line"> </div>
<div class="line">        up-level:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 1</div>
<div class="line">            description: |</div>
<div class="line">                Overload level that should least for `overload-on-seconds` to switch to</div>
<div class="line">                overloaded state.</div>
<div class="line"> </div>
<div class="line">        down-level:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 1</div>
<div class="line">            description: |</div>
<div class="line">                Overload level that should least for `overload-on-seconds` to</div>
<div class="line">                increase RPS limits.</div>
<div class="line"> </div>
<div class="line">        no-limit-seconds:</div>
<div class="line">            type: integer</div>
<div class="line">            minimum: 1</div>
<div class="line">            description: |</div>
<div class="line">                Seconds without overload to switch from overloaded state and</div>
<div class="line">                remove all the RPS limits.</div>
<div class="line"> </div>
<div class="line">       load-limit-crit-percent:</div>
<div class="line">            type: integer</div>
<div class="line">            description: |</div>
<div class="line">                On reaching this load percent immediately switch to overloaded state.</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;down-level&quot;</span>: 8,</div>
<div class="line">  <span class="stringliteral">&quot;down-rate-percent&quot;</span>: 1,</div>
<div class="line">  <span class="stringliteral">&quot;load-limit-crit-percent&quot;</span>: 70,</div>
<div class="line">  <span class="stringliteral">&quot;min-limit&quot;</span>: 2,</div>
<div class="line">  <span class="stringliteral">&quot;no-limit-seconds&quot;</span>: 120,</div>
<div class="line">  <span class="stringliteral">&quot;overload-off-seconds&quot;</span>: 8,</div>
<div class="line">  <span class="stringliteral">&quot;overload-on-seconds&quot;</span>: 8,</div>
<div class="line">  <span class="stringliteral">&quot;up-level&quot;</span>: 2,</div>
<div class="line">  <span class="stringliteral">&quot;up-rate-percent&quot;</span>: 1</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../de/dac/classcongestion__control_1_1Component.html" title="Component to limit too active requests, also known as CC.">congestion_control::Component</a>.</p>
<p><a class="anchor" id="USERVER_RPS_CCONTROL_ENABLED"></a></p>
<h1><a class="anchor" id="autotoc_md82"></a>
USERVER_RPS_CCONTROL_ENABLED</h1>
<p>Controls whether congestion control limiting of RPS is performed (if main task processor is overloaded, then the server starts rejecting some requests).</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: boolean</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">true</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../de/dac/classcongestion__control_1_1Component.html" title="Component to limit too active requests, also known as CC.">congestion_control::Component</a>.</p>
<p><a class="anchor" id="USERVER_TASK_PROCESSOR_PROFILER_DEBUG"></a></p>
<h1><a class="anchor" id="autotoc_md83"></a>
USERVER_TASK_PROCESSOR_PROFILER_DEBUG</h1>
<p>Dynamic config for profiling the coroutine based engine of userver. Dictionary key names are the names of engine::TaskProcessor.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    properties: {}</div>
<div class="line">    additionalProperties:</div>
<div class="line">        $ref: &#39;#/definitions/TaskProcessorSettings&#39;</div>
<div class="line">    definitions:</div>
<div class="line">        TaskProcessorSettings:</div>
<div class="line">            type: object</div>
<div class="line">            required:</div>
<div class="line">              - enabled</div>
<div class="line">              - execution-slice-threshold-us</div>
<div class="line">            additionalProperties: false</div>
<div class="line">            properties:</div>
<div class="line">                enabled:</div>
<div class="line">                    type: boolean</div>
<div class="line">                    description: |</div>
<div class="line">                        Set to `true` to turn on the profiling</div>
<div class="line">                execution-slice-threshold-us:</div>
<div class="line">                    type: integer</div>
<div class="line">                    description: |</div>
<div class="line">                        Execution threshold of a coroutine on a thread without context switch.</div>
<div class="line">                        If the threshold is reached then the coroutine is logged, otherwise</div>
<div class="line">                        does nothing.</div>
<div class="line">                    minimum: 1</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;fs-task-processor&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;enabled&quot;</span>: <span class="keyword">false</span>,</div>
<div class="line">    <span class="stringliteral">&quot;execution-slice-threshold-us&quot;</span>: 1000000</div>
<div class="line">  },</div>
<div class="line">  <span class="stringliteral">&quot;main-task-processor&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;enabled&quot;</span>: <span class="keyword">false</span>,</div>
<div class="line">    <span class="stringliteral">&quot;execution-slice-threshold-us&quot;</span>: 2000</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../dc/d21/classcomponents_1_1ManagerControllerComponent.html" title="Component that prepares the engine internals and starts all the other components.">components::ManagerControllerComponent</a>.</p>
<p><a class="anchor" id="USERVER_TASK_PROCESSOR_QOS"></a></p>
<h1><a class="anchor" id="autotoc_md84"></a>
USERVER_TASK_PROCESSOR_QOS</h1>
<p>Controls engine::TaskProcessor quality of service dynamic config.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    required:</div>
<div class="line">      - default-service</div>
<div class="line">    additionalProperties: false</div>
<div class="line">    properties:</div>
<div class="line">        default-service:</div>
<div class="line">            type: object</div>
<div class="line">            additionalProperties: false</div>
<div class="line">            required:</div>
<div class="line">              - default-task-processor</div>
<div class="line">            properties:</div>
<div class="line">                default-task-processor:</div>
<div class="line">                    type: object</div>
<div class="line">                    additionalProperties: false</div>
<div class="line">                    required:</div>
<div class="line">                      - wait_queue_overload</div>
<div class="line">                    properties:</div>
<div class="line">                        wait_queue_overload:</div>
<div class="line">                            type: object</div>
<div class="line">                            additionalProperties: false</div>
<div class="line">                            required:</div>
<div class="line">                              - time_limit_us</div>
<div class="line">                              - length_limit</div>
<div class="line">                              - action</div>
<div class="line">                            properties:</div>
<div class="line">                                time_limit_us:</div>
<div class="line">                                    type: integer</div>
<div class="line">                                    minimum: 0</div>
<div class="line">                                    description: |</div>
<div class="line">                                        Wait in queue time after which the `action is applied`.</div>
<div class="line">                                length_limit:</div>
<div class="line">                                    type: integer</div>
<div class="line">                                    minimum: 0</div>
<div class="line">                                    description: |</div>
<div class="line">                                        Queue size after which the `action` is applied.</div>
<div class="line">                                        action</div>
<div class="line">                                action:</div>
<div class="line">                                    type: string</div>
<div class="line">                                    enum:</div>
<div class="line">                                      - ignore</div>
<div class="line">                                      - cancel</div>
<div class="line">                                    description: |</div>
<div class="line">                                        Action to perform on tasks on queue overload.</div>
<div class="line">                                        `cancel` - cancels the tasks</div>
<div class="line">                                sensor_time_limit_us:</div>
<div class="line">                                    type: integer</div>
<div class="line">                                    minimum: 0</div>
<div class="line">                                    description: |</div>
<div class="line">                                        Wait in queue time after which the overload events for</div>
<div class="line">                                        RPS congestion control are generated.</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;default-service&quot;</span>: {</div>
<div class="line">    <span class="stringliteral">&quot;default-task-processor&quot;</span>: {</div>
<div class="line">      <span class="stringliteral">&quot;wait_queue_overload&quot;</span>: {</div>
<div class="line">        <span class="stringliteral">&quot;action&quot;</span>: <span class="stringliteral">&quot;cancel&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;length_limit&quot;</span>: 5000,</div>
<div class="line">        <span class="stringliteral">&quot;sensor_time_limit_us&quot;</span>: 12000,</div>
<div class="line">        <span class="stringliteral">&quot;time_limit_us&quot;</span>: 0</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../dc/d21/classcomponents_1_1ManagerControllerComponent.html" title="Component that prepares the engine internals and starts all the other components.">components::ManagerControllerComponent</a>.</p>
<p><a class="anchor" id="USERVER_FILES_CONTENT_TYPE_MAP"></a></p>
<h1><a class="anchor" id="autotoc_md85"></a>
USERVER_FILES_CONTENT_TYPE_MAP</h1>
<p>Dynamic config for mapping extension files with HTTP header content type.</p>
<div class="fragment"><div class="line">yaml</div>
<div class="line">schema:</div>
<div class="line">    type: object</div>
<div class="line">    additionalProperties:</div>
<div class="line">        type: string</div>
</div><!-- fragment --><p><b>Example:</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;.css&quot;</span>: <span class="stringliteral">&quot;text/css&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;.gif&quot;</span>: <span class="stringliteral">&quot;image/gif&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;.htm&quot;</span>: <span class="stringliteral">&quot;text/html&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;.html&quot;</span>: <span class="stringliteral">&quot;text/html&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;.jpeg&quot;</span>: <span class="stringliteral">&quot;image/jpeg&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;.js&quot;</span>: <span class="stringliteral">&quot;application/javascript&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;.json&quot;</span>: <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;.md&quot;</span>: <span class="stringliteral">&quot;text/markdown&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;.png&quot;</span>: <span class="stringliteral">&quot;image/png&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;.svg&quot;</span>: <span class="stringliteral">&quot;image/svg+xml&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;__default__&quot;</span>: <span class="stringliteral">&quot;text/plain&quot;</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Used by <a class="el" href="../../dd/d88/classserver_1_1handlers_1_1HttpHandlerStatic.html" title="Handler that returns HTTP 200 if file exist and returns file data with mapped content/type.">server::handlers::HttpHandlerStatic</a></p>
<hr  />
<p> <div class="bottom-nav">  ⇦ <a class="el" href="../../d5/d46/md_en_2userver_2dynamic__config.html">Dynamic config</a> | <a class="el" href="../../d1/de2/md_en_2userver_2log__level__running__service.html">Logging at runtime</a> ⇨  </div>  </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Oct 21 2024 13:55:58 for userver by
    <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.10.0</li>
  </ul>
</div>
<script type="text/javascript" src="../../codeHighlight.js"></script>
<script type="text/javascript" src="../../telegramLanguage.js"></script>
<script type="text/javascript" src="../../styledBtn.js"></script>
<script type="text/javascript" src="../../search.js"></script>
<script type="text/javascript" src="../../header.js"></script>
<script type="text/javascript" src="../../searchHighlight.js"></script>
<script>
  const addLinks = () =>  {
      const links = document.createElement('div')
      links.id = 'links';
      links.innerHTML = `
          <a href="https://github.com/userver-framework/" id='github_header' rel="noopener" target="_blank" class="titlelink">
              <img src="../../github_logo.svg" alt="Github" class="gh-logo"/>
          </a>
          <a href="https://t.me/userver_en" rel="noopener" id='telegram_channel' target="_blank" class="titlelink generic_tg_link">
              <img src="../../telegram_logo.svg" alt="Telegram"/>
          </a>
      `
      document.getElementById('main-navbar').appendChild(links);
  }
  $(function() {
    $(document).ready(function() {
      setTimeout(() => {
      init_all_results_button();
      init_search_hotkey();
      init_header();
      addLinks();
      changeTelegramChannelLanguageForRussianSpeakingUser();
      document.getElementById("side-nav").style.display = "none";
      const isLanding = document.getElementById('landing_logo_id') !== null;
      if (isLanding) return;
      highlight_code();
      styleNavButtons();
    }, 0);
    });
  });
</script>
<script type="module" src="../../toc.js"></script>
</body>
</html>
