<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
        ym(94541714, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/94541714" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->
      <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=9"/>
      <meta name="generator" content="Doxygen 1.10.0"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <meta property="og:image" content="../../logo_in_circle.png"/>
      <meta property="og:image:alt" content="userver logo"/>
      <link rel="icon" href="../../favicon.svg">
      <title>userver: Chaos Testing</title>
      <!-- Roboto fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <!-- Roboto fonts -->
      <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
      <script type="text/javascript" src="../../jquery.js"></script>
      <!-- Highlight.js -->
      <link rel="stylesheet" href="../../highlightjs.css">
      <script src="../../highlight.min.js"></script>
      <!-- Highlight.js -->
      <!-- Roboto fonts -->
      <script type="text/javascript" src="../../dynsections.js"></script>
      <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
      <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
      <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
      <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" href="../../customdoxygen.css">
      <!-- Doxygen Awesome -->
      <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
      <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
        DoxygenAwesomeParagraphLink.init()
        DoxygenAwesomeInteractiveToc.topOffset = 180;
      </script>
      <!-- Doxygen Awesome -->
    </head>
    <body>
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0" style="width: 100%;">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
                <td id="projectalign">
                  <div id="projectname">
                    <a class="titlelink" href="../../index.html">userver
                    </a>
                  </div>
                  <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework</a></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('de/d74/md_en_2userver_2chaos__testing.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Chaos Testing</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md113"></a> A system could not achieve high availability if it does not tolerate failures. In microservices and other distributed network architectures the hardware and network itself is the source of failures.</p>
<p>Luckily userver provides a network proxy to simulate network errors and whose behavior could be controlled from <a class="el" href="../../df/d07/md_en_2userver_2functional__testing.html">functional tests</a>. In other words, it is a tool to do chaos testing.</p>
<p>To implement the tests, the <a class="el" href="../../d4/d3d/classpytest__userver_1_1chaos_1_1TcpGate.html" title="Implements TCP chaos-proxy logic such as accepting incoming tcp client connections.">pytest_userver.chaos.TcpGate</a> and <a class="el" href="../../d8/de5/classpytest__userver_1_1chaos_1_1UdpGate.html" title="Implements UDP chaos-proxy logic such as demuxing incoming datagrams from different clients.">pytest_userver.chaos.UdpGate</a> are placed between client and server. After that, the proxy could be used to test the client and the server fault tolerance. The following network conditions could be simulated:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Network condition   </th><th class="markdownTableHeadNone">Possible reasons for the behavior in production    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Server doesn't accept new connections   </td><td class="markdownTableBodyNone">Server is overloaded; network misconfigured    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Client/server does not read data from socket   </td><td class="markdownTableBodyNone">Client/server is overloaded; deadlock in client/server thread; OS lost the data on socket due to overload    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Client/server reads data, but does not respond   </td><td class="markdownTableBodyNone">Client/server is overloaded; deadlock in client/server thread    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Client/server closes connections   </td><td class="markdownTableBodyNone">Client/server restart; client/server overloaded and shutdowns connections    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Client/server closes the socket when receives data   </td><td class="markdownTableBodyNone">Client/server congestion control in action    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Client/server corrupts the response data   </td><td class="markdownTableBodyNone">Stack overflow or other memory corruption at client/server side    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Network works with send/receive delays   </td><td class="markdownTableBodyNone">Poorly performing network; interference in the network    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Limited bandwidth   </td><td class="markdownTableBodyNone">Poorly performing network;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Connections close on timeout   </td><td class="markdownTableBodyNone">Timeout on client/server/network interactions from client/server provider    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data slicing   </td><td class="markdownTableBodyNone">Interference in the network; poor routers configuration   </td></tr>
</table>
<p>Keep in mind the following picture:</p>
<p>For client requests: </p><div class="fragment"><div class="line">Client -&gt; chaos.TcpGate -&gt; Server</div>
</div><!-- fragment --><p>For server responses: </p><div class="fragment"><div class="line">Client &lt;- chaos.TcpGate &lt;- Server</div>
</div><!-- fragment --><p>Gates allows you to simulate various network conditions on <code>client</code> and <code>server</code> parts independently. For example, if you wish to corrupt data from Client to Server, you should use <code>gate.to_server_corrupt_data()</code>. If you wish to corrupt data that goes from Server to Client, you should use <code>gate.to_client_corrupt_data()</code>.</p>
<p>To restore the non failure behavior use <code>gate.to_client_pass()</code> and <code>gate.to_server_pass()</code> respectively.</p>
<h1><a class="anchor" id="autotoc_md114"></a>
chaos.TcpGate</h1>
<p>Use <a class="el" href="../../d4/d3d/classpytest__userver_1_1chaos_1_1TcpGate.html">chaos.TcpGate</a> when you need to deal with messages over TCP protocol (for example HTTP). This gate supports multiple connections from different clients to one server. TcpGate accepts incoming connections which trigger swapning of new clients connected to server.</p>
<h1><a class="anchor" id="autotoc_md115"></a>
chaos.UdpGate</h1>
<p>Use <a class="el" href="../../d8/de5/classpytest__userver_1_1chaos_1_1UdpGate.html">chaos.UdpGate</a> when you work with <br  />
 UDP protocol (for example DNS). UdpGate supports data providing between only one client and one server. If you wish to connect more than one Client to Server, please use different instance of UdpGate for every client.</p>
<h1><a class="anchor" id="autotoc_md116"></a>
Usage Sample</h1>
<p>Import <code>chaos</code> to use <a class="el" href="../../d4/d3d/classpytest__userver_1_1chaos_1_1TcpGate.html">chaos.TcpGate</a>:</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> pytest_userver <span class="keyword">import</span> chaos</div>
</div><!-- fragment --><p>The proxy usually should be started before the service and should keep working between the service tests runs. To achieve that make a fixture with the session scope and add it to the service fixture dependencies.</p>
<p>An example how to setup the proxy to stand between the service and PostgreSQL database:</p>
<div class="fragment"><div class="line"><span class="preprocessor">@pytest.fixture(name=&#39;pgsql_local&#39;, scope=&#39;session&#39;)</span></div>
<div class="line"><span class="keyword">def </span>_pgsql_local(service_source_dir, pgsql_local_create):</div>
<div class="line">    databases = discover.find_schemas(</div>
<div class="line">        <span class="stringliteral">&#39;pg&#39;</span>, [service_source_dir.joinpath(<span class="stringliteral">&#39;schemas/postgresql&#39;</span>)],</div>
<div class="line">    )</div>
<div class="line">    <span class="keywordflow">return</span> pgsql_local_create(list(databases.values()))</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@pytest.fixture(scope=&#39;session&#39;)</span></div>
<div class="line"><span class="keyword">async def </span>_gate_started(loop, pgsql_local):</div>
<div class="line">    gate_config = chaos.GateRoute(</div>
<div class="line">        name=<span class="stringliteral">&#39;postgres proxy&#39;</span>,</div>
<div class="line">        host_to_server=pgsql_local[<span class="stringliteral">&#39;key_value&#39;</span>].host,</div>
<div class="line">        port_to_server=pgsql_local[<span class="stringliteral">&#39;key_value&#39;</span>].port,</div>
<div class="line">    )</div>
<div class="line">    <span class="keyword">async</span> <span class="keyword">with</span> chaos.TcpGate(gate_config, loop) <span class="keyword">as</span> proxy:</div>
<div class="line">        <span class="keywordflow">yield</span> proxy</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@pytest.fixture</span></div>
<div class="line"><span class="keyword">def </span>extra_client_deps(_gate_started):</div>
<div class="line">    <span class="keywordflow">pass</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">@pytest.fixture(name=<span class="stringliteral">&#39;userver_config_testsuite&#39;</span>, scope=<span class="stringliteral">&#39;session&#39;</span>)</div>
<div class="line"><span class="keyword">def </span>_userver_config_testsuite(userver_config_testsuite):</div>
<div class="line">    <span class="keyword">def </span>patch_config(config_yaml, config_vars):</div>
<div class="line">        userver_config_testsuite(config_yaml, config_vars)</div>
<div class="line"> </div>
<div class="line">        components: dict = config_yaml[<span class="stringliteral">&#39;components_manager&#39;</span>][<span class="stringliteral">&#39;components&#39;</span>]</div>
<div class="line">        testsuite_support = components[<span class="stringliteral">&#39;testsuite-support&#39;</span>]</div>
<div class="line">        testsuite_support[<span class="stringliteral">&#39;testsuite-pg-execute-timeout&#39;</span>] = <span class="stringliteral">&#39;0ms&#39;</span></div>
<div class="line">        testsuite_support[<span class="stringliteral">&#39;testsuite-pg-statement-timeout&#39;</span>] = <span class="stringliteral">&#39;0ms&#39;</span></div>
<div class="line">        testsuite_support.pop(<span class="stringliteral">&#39;testsuite-pg-readonly-master-expected&#39;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> patch_config</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@pytest.fixture(scope=&#39;session&#39;)</span></div>
<div class="line"><span class="keyword">def </span>userver_pg_config(pgsql_local, _gate_started):</div>
<div class="line">    <span class="keyword">def </span>_hook_db_config(config_yaml, config_vars):</div>
<div class="line">        host, port = _gate_started.get_sockname_for_clients()</div>
<div class="line"> </div>
<div class="line">        db_info = pgsql_local[<span class="stringliteral">&#39;key_value&#39;</span>]</div>
<div class="line">        db_chaos_gate = connection.PgConnectionInfo(</div>
<div class="line">            host=host,</div>
<div class="line">            port=port,</div>
<div class="line">            user=db_info.user,</div>
<div class="line">            password=db_info.password,</div>
<div class="line">            options=db_info.options,</div>
<div class="line">            sslmode=db_info.sslmode,</div>
<div class="line">            dbname=db_info.dbname,</div>
<div class="line">        )</div>
<div class="line"> </div>
<div class="line">        components = config_yaml[<span class="stringliteral">&#39;components_manager&#39;</span>][<span class="stringliteral">&#39;components&#39;</span>]</div>
<div class="line">        db = components[<span class="stringliteral">&#39;key-value-database&#39;</span>]</div>
<div class="line">        db[<span class="stringliteral">&#39;dbconnection&#39;</span>] = db_chaos_gate.get_uri()</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> _hook_db_config</div>
</div><!-- fragment --><p>The proxy should be reset to the default state between the test runs, to the state when connections are accepted and the data pass from client to server and from server to client:</p>
<div class="fragment"><div class="line"><span class="preprocessor">@pytest.fixture(name=&#39;gate&#39;)</span></div>
<div class="line"><span class="keyword">async def </span>_gate_ready(service_client, _gate_started):</div>
<div class="line">    _gate_started.to_server_pass()</div>
<div class="line">    _gate_started.to_client_pass()</div>
<div class="line">    _gate_started.start_accepting()</div>
<div class="line"> </div>
<div class="line">    await _gate_started.wait_for_connections()</div>
<div class="line">    <span class="keywordflow">yield</span> _gate_started</div>
</div><!-- fragment --><p>After that, everything is ready to write chaos tests:</p>
<div class="fragment"><div class="line"><span class="keyword">async def </span>test_pg_congestion_control(service_client, gate):</div>
<div class="line">    gate.to_server_close_on_data()</div>
<div class="line">    gate.to_client_close_on_data()</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(gate.connections_count()):</div>
<div class="line">        response = await service_client.get(SELECT_SMALL_TIMEOUT_URL)</div>
<div class="line">        <span class="keyword">assert</span> response.status == 500</div>
<div class="line"> </div>
<div class="line">    await _check_that_restores(service_client, gate)</div>
</div><!-- fragment --><p>Note that the most important part of the test is to make sure that the service restores functionality after the failures. Touch the dead connections and make sure that the service restores:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> asyncio</div>
<div class="line"><span class="keyword">import</span> logging</div>
<div class="line"> </div>
<div class="line">SELECT_URL = <span class="stringliteral">&#39;/chaos/postgres?type=select&#39;</span></div>
<div class="line">MAX_POOL_SIZE = 1  <span class="comment"># should be in sync with ./static_config.yaml</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">logger = logging.getLogger(__name__)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">async def </span>consume_dead_db_connections(service_client):</div>
<div class="line">    logger.debug(<span class="stringliteral">&#39;Starting &quot;consume_dead_db_connections&quot;&#39;</span>)</div>
<div class="line">    await asyncio.gather(*[</div>
<div class="line">        service_client.get(SELECT_URL) <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(MAX_POOL_SIZE * 2)</div>
<div class="line">    ])</div>
<div class="line">    logger.debug(<span class="stringliteral">&#39;End of &quot;consume_dead_db_connections&quot;&#39;</span>)</div>
<div class="line"> </div>
<div class="line">    logger.debug(<span class="stringliteral">&#39;Starting &quot;consume_dead_db_connections&quot; check for 200&#39;</span>)</div>
<div class="line">    results_list = await asyncio.gather(*[</div>
<div class="line">        service_client.get(SELECT_URL) <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(MAX_POOL_SIZE)</div>
<div class="line">    ])</div>
<div class="line">    <span class="keywordflow">for</span> result <span class="keywordflow">in</span> results_list:</div>
<div class="line">        <span class="keyword">assert</span> result.status_code == 200</div>
<div class="line">    logger.debug(<span class="stringliteral">&#39;End of &quot;consume_dead_db_connections&quot; check for 200&#39;</span>)</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">async def </span>_check_that_restores(service_client, gate):</div>
<div class="line">    gate.to_server_pass()</div>
<div class="line">    gate.to_client_pass()</div>
<div class="line">    gate.start_accepting()</div>
<div class="line"> </div>
<div class="line">    await utils.consume_dead_db_connections(service_client)</div>
<div class="line"> </div>
<div class="line">    logger.debug(<span class="stringliteral">&#39;Starting &quot;_check_that_restores&quot; wait for 200&#39;</span>)</div>
<div class="line">    response = await service_client.get(SELECT_URL)</div>
<div class="line">    <span class="keyword">assert</span> response.status == 200, <span class="stringliteral">&#39;Bad results after connection restore&#39;</span></div>
<div class="line">    logger.debug(<span class="stringliteral">&#39;End of &quot;_check_that_restores&quot; wait for 200&#39;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md117"></a>
Full Sources</h2>
<ul>
<li><a class="el" href="../../d6/d55/postgresql_2functional_tests_2basic_chaos_2tests_2test_postgres_8py-example.html">postgresql/functional_tests/basic_chaos/tests/test_postgres.py</a></li>
<li><a class="el" href="../../dd/d0d/postgresql_2functional_tests_2basic_chaos_2conftest_8py-example.html">postgresql/functional_tests/basic_chaos/conftest.py</a></li>
<li><a class="el" href="../../d3/df7/postgresql_2functional_tests_2basic_chaos_2utils_8py-example.html">postgresql/functional_tests/basic_chaos/utils.py</a></li>
<li><a class="el" href="../../d6/d91/postgresql_2functional_tests_2basic_chaos_2postgres_service_8cpp-example.html">postgresql/functional_tests/basic_chaos/postgres_service.cpp</a></li>
<li><a class="el" href="../../d0/d7a/postgresql_2functional_tests_2basic_chaos_2static_config_8yaml-example.html">postgresql/functional_tests/basic_chaos/static_config.yaml</a></li>
<li><a class="el" href="../../da/d14/postgresql_2functional_tests_2basic_chaos_2schemas_2postgresql_2key_value_8sql-example.html">postgresql/functional_tests/basic_chaos/schemas/postgresql/key_value.sql</a></li>
<li><a class="el" href="../../dd/d3f/postgresql_2functional_tests_2basic_chaos_2CMakeLists_8txt-example.html">postgresql/functional_tests/basic_chaos/CMakeLists.txt</a></li>
<li><a class="el" href="../../d2/d74/testsuite_2pytest_plugins_2pytest_userver_2chaos_8py-example.html">testsuite/pytest_plugins/pytest_userver/chaos.py</a></li>
</ul>
<hr  />
<p> <div class="bottom-nav">  ⇦ <a class="el" href="../../df/d07/md_en_2userver_2functional__testing.html">Functional service tests (testsuite)</a> | <a class="el" href="../../db/d8f/md_en_2userver_2profile__context__switches.html">Profiling context switches</a> ⇨  </div>  </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Oct 21 2024 13:55:58 for userver by
    <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.10.0</li>
  </ul>
</div>
<script type="text/javascript" src="../../codeHighlight.js"></script>
<script type="text/javascript" src="../../telegramLanguage.js"></script>
<script type="text/javascript" src="../../styledBtn.js"></script>
<script type="text/javascript" src="../../search.js"></script>
<script type="text/javascript" src="../../header.js"></script>
<script type="text/javascript" src="../../searchHighlight.js"></script>
<script>
  const addLinks = () =>  {
      const links = document.createElement('div')
      links.id = 'links';
      links.innerHTML = `
          <a href="https://github.com/userver-framework/" id='github_header' rel="noopener" target="_blank" class="titlelink">
              <img src="../../github_logo.svg" alt="Github" class="gh-logo"/>
          </a>
          <a href="https://t.me/userver_en" rel="noopener" id='telegram_channel' target="_blank" class="titlelink generic_tg_link">
              <img src="../../telegram_logo.svg" alt="Telegram"/>
          </a>
      `
      document.getElementById('main-navbar').appendChild(links);
  }
  $(function() {
    $(document).ready(function() {
      setTimeout(() => {
      init_all_results_button();
      init_search_hotkey();
      init_header();
      addLinks();
      changeTelegramChannelLanguageForRussianSpeakingUser();
      document.getElementById("side-nav").style.display = "none";
      const isLanding = document.getElementById('landing_logo_id') !== null;
      if (isLanding) return;
      highlight_code();
      styleNavButtons();
    }, 0);
    });
  });
</script>
<script type="module" src="../../toc.js"></script>
</body>
</html>
