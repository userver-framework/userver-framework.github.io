<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
        ym(94541714, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/94541714" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->
      <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=9"/>
      <meta name="generator" content="Doxygen 1.10.0"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <meta property="og:image" content="../../logo_in_circle.png"/>
      <meta property="og:image:alt" content="userver logo"/>
      <link rel="icon" href="../../favicon.svg">
      <title>userver: dist_lock::DistLockedWorker Class Reference</title>
      <!-- Roboto fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <!-- Roboto fonts -->
      <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
      <script type="text/javascript" src="../../jquery.js"></script>
      <!-- Highlight.js -->
      <link rel="stylesheet" href="../../highlightjs.css">
      <script src="../../highlight.min.js"></script>
      <!-- Highlight.js -->
      <!-- Roboto fonts -->
      <script type="text/javascript" src="../../dynsections.js"></script>
      <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
      <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
      <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
      <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" href="../../customdoxygen.css">
      <!-- Doxygen Awesome -->
      <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
      <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
        DoxygenAwesomeParagraphLink.init()
        DoxygenAwesomeInteractiveToc.topOffset = 180;
      </script>
      <!-- Doxygen Awesome -->
    </head>
    <body>
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0" style="width: 100%;">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
                <td id="projectalign">
                  <div id="projectname">
                    <a class="titlelink" href="../../index.html">userver
                    </a>
                  </div>
                  <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework</a></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d4/d24/classdist__lock_1_1DistLockedWorker.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../dc/d22/classdist__lock_1_1DistLockedWorker-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">dist_lock::DistLockedWorker Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d8/ded/dist__locked__worker_8hpp_source.html">userver/dist_lock/dist_locked_worker.hpp</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A high-level primitive that perpetually tries to acquire a distributed lock and runs user callback in a separate task while the lock is held. Cancels the task when the lock is lost. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/ded/dist__locked__worker_8hpp_source.html#l00028">28</a> of file <a class="el" href="../../d8/ded/dist__locked__worker_8hpp_source.html">dist_locked_worker.hpp</a>.</p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ab39daa651286f7b6fa5810fae19810ae" id="r_ab39daa651286f7b6fa5810fae19810ae"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab39daa651286f7b6fa5810fae19810ae">WorkerFunc</a> = std::function&lt;void()&gt;</td></tr>
<tr class="separator:ab39daa651286f7b6fa5810fae19810ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9a94d49e26a05dde2427cd0ec4949cc1" id="r_a9a94d49e26a05dde2427cd0ec4949cc1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a94d49e26a05dde2427cd0ec4949cc1">DistLockedWorker</a> (std::string name, WorkerFunc worker_func, std::shared_ptr&lt; <a class="el" href="../../d9/d8e/classdist__lock_1_1DistLockStrategyBase.html">DistLockStrategyBase</a> &gt; strategy, const <a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a> &amp;settings={}, engine::TaskProcessor *task_processor=nullptr, <a class="el" href="../../dd/d46/namespacelogging.html#a77a06871eab62fc517b5fad045a6db17">logging::Level</a> locker_log_level=logging::Level::kInfo)</td></tr>
<tr class="separator:a9a94d49e26a05dde2427cd0ec4949cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a145492657a46113fb1c2865c6d944159" id="r_a145492657a46113fb1c2865c6d944159"><td class="memItemLeft" align="right" valign="top"><a id="a145492657a46113fb1c2865c6d944159" name="a145492657a46113fb1c2865c6d944159"></a>
const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>Name</b> () const</td></tr>
<tr class="memdesc:a145492657a46113fb1c2865c6d944159"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the worker. <br /></td></tr>
<tr class="separator:a145492657a46113fb1c2865c6d944159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb813b28b296ecaddab6324a89a28c86" id="r_afb813b28b296ecaddab6324a89a28c86"><td class="memItemLeft" align="right" valign="top"><a id="afb813b28b296ecaddab6324a89a28c86" name="afb813b28b296ecaddab6324a89a28c86"></a>
<a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><b>GetSettings</b> () const</td></tr>
<tr class="memdesc:afb813b28b296ecaddab6324a89a28c86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves settings in a thread-safe way. <br /></td></tr>
<tr class="separator:afb813b28b296ecaddab6324a89a28c86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace9c554d5e3ebf73ccfffa141d0b49d6" id="r_ace9c554d5e3ebf73ccfffa141d0b49d6"><td class="memItemLeft" align="right" valign="top"><a id="ace9c554d5e3ebf73ccfffa141d0b49d6" name="ace9c554d5e3ebf73ccfffa141d0b49d6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>UpdateSettings</b> (const <a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a> &amp;)</td></tr>
<tr class="memdesc:ace9c554d5e3ebf73ccfffa141d0b49d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update settings in a thread-safe way. <br /></td></tr>
<tr class="separator:ace9c554d5e3ebf73ccfffa141d0b49d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc99d41e7d336d06b54f6e612bc941ad" id="r_adc99d41e7d336d06b54f6e612bc941ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc99d41e7d336d06b54f6e612bc941ad">Start</a> ()</td></tr>
<tr class="separator:adc99d41e7d336d06b54f6e612bc941ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22da82d3c0dd477df5f419563610bfe7" id="r_a22da82d3c0dd477df5f419563610bfe7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a22da82d3c0dd477df5f419563610bfe7">Stop</a> ()</td></tr>
<tr class="separator:a22da82d3c0dd477df5f419563610bfe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc887823b9c594d1d738316666f2cab" id="r_a2dc887823b9c594d1d738316666f2cab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2dc887823b9c594d1d738316666f2cab">RunOnce</a> ()</td></tr>
<tr class="separator:a2dc887823b9c594d1d738316666f2cab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a628dd79a2f16af07cadb2b486b321be3" id="r_a628dd79a2f16af07cadb2b486b321be3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a628dd79a2f16af07cadb2b486b321be3">IsRunning</a> () const</td></tr>
<tr class="separator:a628dd79a2f16af07cadb2b486b321be3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8c989cffdb66d2f719cbae187ddb5e" id="r_a2f8c989cffdb66d2f719cbae187ddb5e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2f8c989cffdb66d2f719cbae187ddb5e">OwnsLock</a> () const noexcept</td></tr>
<tr class="separator:a2f8c989cffdb66d2f719cbae187ddb5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd01cafa492885356cc4eb893d3fc4f" id="r_a3cd01cafa492885356cc4eb893d3fc4f"><td class="memItemLeft" align="right" valign="top">std::optional&lt; std::chrono::steady_clock::duration &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3cd01cafa492885356cc4eb893d3fc4f">GetLockedDuration</a> () const</td></tr>
<tr class="separator:a3cd01cafa492885356cc4eb893d3fc4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5f94cf68d26ce6125298c450782654d" id="r_ab5f94cf68d26ce6125298c450782654d"><td class="memItemLeft" align="right" valign="top"><a id="ab5f94cf68d26ce6125298c450782654d" name="ab5f94cf68d26ce6125298c450782654d"></a>
const <a class="el" href="../../d2/de5/structdist__lock_1_1Statistics.html">Statistics</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>GetStatistics</b> () const</td></tr>
<tr class="memdesc:ab5f94cf68d26ce6125298c450782654d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns lock acquisition statistics. <br /></td></tr>
<tr class="separator:ab5f94cf68d26ce6125298c450782654d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ab39daa651286f7b6fa5810fae19810ae" name="ab39daa651286f7b6fa5810fae19810ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab39daa651286f7b6fa5810fae19810ae">&#9670;&#160;</a></span>WorkerFunc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using dist_lock::DistLockedWorker::WorkerFunc = std::function&lt;void()&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/ded/dist__locked__worker_8hpp_source.html#l00030">30</a> of file <a class="el" href="../../d8/ded/dist__locked__worker_8hpp_source.html">dist_locked_worker.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9a94d49e26a05dde2427cd0ec4949cc1" name="a9a94d49e26a05dde2427cd0ec4949cc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a94d49e26a05dde2427cd0ec4949cc1">&#9670;&#160;</a></span>DistLockedWorker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dist_lock::DistLockedWorker::DistLockedWorker </td>
          <td>(</td>
          <td class="paramtype">std::string</td>          <td class="paramname"><span class="paramname"><em>name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WorkerFunc</td>          <td class="paramname"><span class="paramname"><em>worker_func</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../d9/d8e/classdist__lock_1_1DistLockStrategyBase.html">DistLockStrategyBase</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>strategy</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d91/structdist__lock_1_1DistLockSettings.html">DistLockSettings</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>settings</em><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">engine::TaskProcessor *</td>          <td class="paramname"><span class="paramname"><em>task_processor</em><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d46/namespacelogging.html#a77a06871eab62fc517b5fad045a6db17">logging::Level</a></td>          <td class="paramname"><span class="paramname"><em>locker_log_level</em><span class="paramdefsep"> = </span><span class="paramdefval">logging::Level::kInfo</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a <a class="el" href="../../d4/d24/classdist__lock_1_1DistLockedWorker.html">DistLockedWorker</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of the worker </td></tr>
    <tr><td class="paramname">worker_func</td><td>a callback that's started each time we acquire the lock and is cancelled when the lock is lost. </td></tr>
    <tr><td class="paramname">settings</td><td>distributed lock settings </td></tr>
    <tr><td class="paramname">strategy</td><td>distributed locking strategy </td></tr>
    <tr><td class="paramname">task_processor</td><td>TaskProcessor for running <code>worker_func</code>, using current TaskProcessor if <code>nullptr</code> </td></tr>
    <tr><td class="paramname">locker_log_level</td><td>Log level for Locker (default is info) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd><code>worker_func</code> must honour task cancellation and stop ASAP when it is cancelled, otherwise brain split is possible (IOW, two different users do work assuming both of them hold the lock, which is not true). </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3cd01cafa492885356cc4eb893d3fc4f" name="a3cd01cafa492885356cc4eb893d3fc4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cd01cafa492885356cc4eb893d3fc4f">&#9670;&#160;</a></span>GetLockedDuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; std::chrono::steady_clock::duration &gt; dist_lock::DistLockedWorker::GetLockedDuration </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns for how long the lock is held (if held at all). Returned value may be less than the real duration. </p>

</div>
</div>
<a id="a628dd79a2f16af07cadb2b486b321be3" name="a628dd79a2f16af07cadb2b486b321be3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a628dd79a2f16af07cadb2b486b321be3">&#9670;&#160;</a></span>IsRunning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dist_lock::DistLockedWorker::IsRunning </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>whether the <a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html" title="A task that tries to acquire a distributed lock and runs user callback once while the lock is held.">DistLockedTask</a> is started. </dd></dl>

</div>
</div>
<a id="a2f8c989cffdb66d2f719cbae187ddb5e" name="a2f8c989cffdb66d2f719cbae187ddb5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f8c989cffdb66d2f719cbae187ddb5e">&#9670;&#160;</a></span>OwnsLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool dist_lock::DistLockedWorker::OwnsLock </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>is current worker owns the lock </dd></dl>

</div>
</div>
<a id="a2dc887823b9c594d1d738316666f2cab" name="a2dc887823b9c594d1d738316666f2cab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dc887823b9c594d1d738316666f2cab">&#9670;&#160;</a></span>RunOnce()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dist_lock::DistLockedWorker::RunOnce </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run task once acquiring the lock. </p><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::exception</td><td>rethrows exception from <code>worker_func</code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adc99d41e7d336d06b54f6e612bc941ad" name="adc99d41e7d336d06b54f6e612bc941ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc99d41e7d336d06b54f6e612bc941ad">&#9670;&#160;</a></span>Start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dist_lock::DistLockedWorker::Start </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts acquiring the lock. Please note that it's possible that the lock is acquired and the WorkerFunc is entered <em>before</em> <a class="el" href="#adc99d41e7d336d06b54f6e612bc941ad">Start()</a> returns. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../db/d9d/classdist__lock_1_1DistLockedTask.html#a1f9b35564f90b9c20d7dd885196d6170">DistLockedTask::DistLockedTask</a> </dd></dl>

</div>
</div>
<a id="a22da82d3c0dd477df5f419563610bfe7" name="a22da82d3c0dd477df5f419563610bfe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22da82d3c0dd477df5f419563610bfe7">&#9670;&#160;</a></span>Stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dist_lock::DistLockedWorker::Stop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stops acquiring the lock. It is guaranteed that the lock is not held after <a class="el" href="#a22da82d3c0dd477df5f419563610bfe7">Stop()</a> return and WorkerFunc is stopped (if was started). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>userver/dist_lock/<a class="el" href="../../d8/ded/dist__locked__worker_8hpp_source.html">dist_locked_worker.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../da/d4a/namespacedist__lock.html">dist_lock</a></li><li class="navelem"><a class="el" href="../../d4/d24/classdist__lock_1_1DistLockedWorker.html">DistLockedWorker</a></li>
    <li class="footer">Generated on Mon Oct 21 2024 13:56:01 for userver by
    <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.10.0</li>
  </ul>
</div>
<script type="text/javascript" src="../../codeHighlight.js"></script>
<script type="text/javascript" src="../../telegramLanguage.js"></script>
<script type="text/javascript" src="../../styledBtn.js"></script>
<script type="text/javascript" src="../../search.js"></script>
<script type="text/javascript" src="../../header.js"></script>
<script type="text/javascript" src="../../searchHighlight.js"></script>
<script>
  const addLinks = () =>  {
      const links = document.createElement('div')
      links.id = 'links';
      links.innerHTML = `
          <a href="https://github.com/userver-framework/" id='github_header' rel="noopener" target="_blank" class="titlelink">
              <img src="../../github_logo.svg" alt="Github" class="gh-logo"/>
          </a>
          <a href="https://t.me/userver_en" rel="noopener" id='telegram_channel' target="_blank" class="titlelink generic_tg_link">
              <img src="../../telegram_logo.svg" alt="Telegram"/>
          </a>
      `
      document.getElementById('main-navbar').appendChild(links);
  }
  $(function() {
    $(document).ready(function() {
      setTimeout(() => {
      init_all_results_button();
      init_search_hotkey();
      init_header();
      addLinks();
      changeTelegramChannelLanguageForRussianSpeakingUser();
      document.getElementById("side-nav").style.display = "none";
      const isLanding = document.getElementById('landing_logo_id') !== null;
      if (isLanding) return;
      highlight_code();
      styleNavButtons();
    }, 0);
    });
  });
</script>
<script type="module" src="../../toc.js"></script>
</body>
</html>
