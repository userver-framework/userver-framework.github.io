<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
        ym(94541714, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/94541714" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->
      <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=9"/>
      <meta name="generator" content="Doxygen 1.10.0"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <meta property="og:image" content="../../logo_in_circle.png"/>
      <meta property="og:image:alt" content="userver logo"/>
      <link rel="icon" href="../../favicon.svg">
      <title>userver: ugrpc::client::GenericClient Class Reference</title>
      <!-- Roboto fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">
      <!-- Roboto fonts -->
      <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
      <script type="text/javascript" src="../../jquery.js"></script>
      <!-- Highlight.js -->
      <link rel="stylesheet" href="../../highlightjs.css">
      <script src="../../highlight.min.js"></script>
      <!-- Highlight.js -->
      <!-- Roboto fonts -->
      <script type="text/javascript" src="../../dynsections.js"></script>
      <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
      <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
      <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
      <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" href="../../customdoxygen.css">
      <!-- Doxygen Awesome -->
      <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
      <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
      <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
        DoxygenAwesomeParagraphLink.init()
        DoxygenAwesomeInteractiveToc.topOffset = 180;
      </script>
      <!-- Doxygen Awesome -->
    </head>
    <body>
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0" style="width: 100%;">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a id='logo-anchor' href="../../index.html"><img alt="Logo" src="../../logo.svg"/></a></td>
                <td id="projectalign">
                  <div id="projectname">
                    <a class="titlelink" href="../../index.html">userver
                    </a>
                  </div>
                  <div id="projectbrief"><a class="titlelink" href="../../index.html">C++ Async Framework</a></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part --><!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d6/d04/classugrpc_1_1client_1_1GenericClient.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d3/d6b/classugrpc_1_1client_1_1GenericClient-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ugrpc::client::GenericClient Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="../../de/d08/group__userver__clients.html">Clients</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d6/d18/generic_8hpp_source.html">userver/ugrpc/client/generic.hpp</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Allows to talk to gRPC services (generic and normal) using dynamic method names. </p>
<p>Created using <a class="el" href="../../d5/dac/classugrpc_1_1client_1_1ClientFactory.html#a72262b2c7c41160ee06655649705b45f">ugrpc::client::ClientFactory::MakeClient</a>.</p>
<p><code>call_name</code> must be in the format <code>full.path.to.TheService/MethodName</code>. Note that unlike in base grpc++, there must be no initial <code>/</code> character.</p>
<p>The API is mainly intended for proxies, where the request-response body is passed unchanged, with settings taken solely from the RPC metadata. In cases where the code needs to operate on the actual messages, serialization of requests and responses is left as an exercise to the user.</p>
<p>Middlewares are customizable and are applied as usual, except that no message hooks are called, meaning that there won't be any logs of messages from the default middleware.</p>
<p>There are no per-call-name metrics by default, for details see <a class="el" href="../../df/db5/structugrpc_1_1client_1_1GenericOptions.html#a8b886d3efe151c99218c2a7a8c0ff86e">GenericOptions::metrics_call_name</a>.</p>
<h2><a class="anchor" id="autotoc_md1071"></a>
Example GenericClient usage with known message types</h2>
<div class="fragment"><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> client = client_factory.<a class="code hl_function" href="../../dc/da7/classugrpc_1_1tests_1_1ServiceBase.html#a5979eb20fbabe08bf37bd482a78b032f">MakeClient</a>&lt;<a class="code hl_class" href="../../d6/d04/classugrpc_1_1client_1_1GenericClient.html" title="Allows to talk to gRPC services (generic and normal) using dynamic method names.">ugrpc::client::GenericClient</a>&gt;();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">constexpr</span> std::string_view call_name = <span class="stringliteral">&quot;sample.ugrpc.UnitTestService/SayHello&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    sample::ugrpc::GreetingRequest request;</div>
<div class="line">    request.set_name(<span class="stringliteral">&quot;generic&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> rpc = client.<a class="code hl_function" href="#ab414a39bd6644ec7a5fb3c65f961df1b" title="Initiate a single request -&gt; single response RPC with the given name.">UnaryCall</a>(call_name, <a class="code hl_function" href="../../d0/d87/namespaceugrpc.html#a991d2b40d048c0e71d625187d54bfb0b" title="Serialize a Protobuf message to the wire format.">ugrpc::SerializeToByteBuffer</a>(request));</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> response_bytes = rpc.Finish();</div>
<div class="line">    sample::ugrpc::GreetingResponse response;</div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d0/d87/namespaceugrpc.html#ac7d4f72585804458e38c88ce2b6e8439" title="Parse a Protobuf message from the wire format.">ugrpc::ParseFromByteBuffer</a>(std::move(response_bytes), response)) {</div>
<div class="line">        <span class="keywordflow">throw</span> <a class="code hl_class" href="../../d3/d28/classugrpc_1_1client_1_1RpcError.html" title="Error during an RPC.">ugrpc::client::RpcError</a>(rpc.GetCallName(), <span class="stringliteral">&quot;Failed to parse response&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> response;</div>
</div><!-- fragment --><p>For a more complete sample, see <a class="el" href="../../d1/d06/md_en_2userver_2grpc.html#grpc_generic_api">grpc_generic_api</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d18/generic_8hpp_source.html#l00065">65</a> of file <a class="el" href="../../d6/d18/generic_8hpp_source.html">generic.hpp</a>.</p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abd81fc3379c0e30395d350f6ba00597d" id="r_abd81fc3379c0e30395d350f6ba00597d"><td class="memItemLeft" align="right" valign="top"><a id="abd81fc3379c0e30395d350f6ba00597d" name="abd81fc3379c0e30395d350f6ba00597d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GenericClient</b> (<a class="el" href="../../d6/d04/classugrpc_1_1client_1_1GenericClient.html">GenericClient</a> &amp;&amp;) noexcept=default</td></tr>
<tr class="separator:abd81fc3379c0e30395d350f6ba00597d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3595633b96da0f087aa6d7a884005e75" id="r_a3595633b96da0f087aa6d7a884005e75"><td class="memItemLeft" align="right" valign="top"><a id="a3595633b96da0f087aa6d7a884005e75" name="a3595633b96da0f087aa6d7a884005e75"></a>
<a class="el" href="../../d6/d04/classugrpc_1_1client_1_1GenericClient.html">GenericClient</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="../../d6/d04/classugrpc_1_1client_1_1GenericClient.html">GenericClient</a> &amp;&amp;) noexcept=delete</td></tr>
<tr class="separator:a3595633b96da0f087aa6d7a884005e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab414a39bd6644ec7a5fb3c65f961df1b" id="r_ab414a39bd6644ec7a5fb3c65f961df1b"><td class="memItemLeft" align="right" valign="top"><a id="ab414a39bd6644ec7a5fb3c65f961df1b" name="ab414a39bd6644ec7a5fb3c65f961df1b"></a>
<a class="el" href="../../d4/dd4/classugrpc_1_1client_1_1UnaryCall.html">client::UnaryCall</a>&lt; grpc::ByteBuffer &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>UnaryCall</b> (std::string_view call_name, const grpc::ByteBuffer &amp;request, std::unique_ptr&lt; grpc::ClientContext &gt; context=std::make_unique&lt; grpc::ClientContext &gt;(), const <a class="el" href="../../df/db5/structugrpc_1_1client_1_1GenericOptions.html">GenericOptions</a> &amp;options={}) const</td></tr>
<tr class="memdesc:ab414a39bd6644ec7a5fb3c65f961df1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiate a <code>single request -&gt; single response</code> RPC with the given name. <br /></td></tr>
<tr class="separator:ab414a39bd6644ec7a5fb3c65f961df1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>userver/ugrpc/client/<a class="el" href="../../d6/d18/generic_8hpp_source.html">generic.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d0/d87/namespaceugrpc.html">ugrpc</a></li><li class="navelem"><a class="el" href="../../df/d12/namespaceugrpc_1_1client.html">client</a></li><li class="navelem"><a class="el" href="../../d6/d04/classugrpc_1_1client_1_1GenericClient.html">GenericClient</a></li>
    <li class="footer">Generated on Mon Oct 21 2024 13:56:09 for userver by
    <a href="https://www.doxygen.org/index.html">Doxygen</a> 1.10.0</li>
  </ul>
</div>
<script type="text/javascript" src="../../codeHighlight.js"></script>
<script type="text/javascript" src="../../telegramLanguage.js"></script>
<script type="text/javascript" src="../../styledBtn.js"></script>
<script type="text/javascript" src="../../search.js"></script>
<script type="text/javascript" src="../../header.js"></script>
<script type="text/javascript" src="../../searchHighlight.js"></script>
<script>
  const addLinks = () =>  {
      const links = document.createElement('div')
      links.id = 'links';
      links.innerHTML = `
          <a href="https://github.com/userver-framework/" id='github_header' rel="noopener" target="_blank" class="titlelink">
              <img src="../../github_logo.svg" alt="Github" class="gh-logo"/>
          </a>
          <a href="https://t.me/userver_en" rel="noopener" id='telegram_channel' target="_blank" class="titlelink generic_tg_link">
              <img src="../../telegram_logo.svg" alt="Telegram"/>
          </a>
      `
      document.getElementById('main-navbar').appendChild(links);
  }
  $(function() {
    $(document).ready(function() {
      setTimeout(() => {
      init_all_results_button();
      init_search_hotkey();
      init_header();
      addLinks();
      changeTelegramChannelLanguageForRussianSpeakingUser();
      document.getElementById("side-nav").style.display = "none";
      const isLanding = document.getElementById('landing_logo_id') !== null;
      if (isLanding) return;
      highlight_code();
      styleNavButtons();
    }, 0);
    });
  });
</script>
<script type="module" src="../../toc.js"></script>
</body>
</html>
